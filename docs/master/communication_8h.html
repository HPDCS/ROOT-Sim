<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>The ROme OpTimistic Simulator: src/communication/communication.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="flatdoc.css" rel="stylesheet" type="text/css"/>
<link href="inline-params.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="rs.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">The ROme OpTimistic Simulator
   &#160;<span id="projectnumber">2.0.0</span>
   </div>
   <div id="projectbrief">A General-Purpose Multithreaded Parallel/Distributed Simulation Platform</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('communication_8h.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">communication.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Communication Routines.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;<a class="el" href="core_8h_source.html">core/core.h</a>&gt;</code><br />
</div><div class="textblock"><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Include dependency graph for communication.h:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="communication_8h__incl.png" border="0" usemap="#src_2communication_2communication_8h" alt=""/></div>
<map name="src_2communication_2communication_8h" id="src_2communication_2communication_8h">
<area shape="rect" id="node2" href="core_8h.html" title="Core ROOT&#45;Sim functionalities. " alt="" coords="471,80,566,107"/>
<area shape="rect" id="node3" href="ROOT-Sim_8h.html" title="ROOT&#45;Sim header for model development. " alt="" coords="322,155,421,181"/>
<area shape="rect" id="node14" href="thread_8h.html" title="Generic thread management facilities. " alt="" coords="670,155,778,181"/>
<area shape="rect" id="node15" href="atomic_8h.html" title="Atomic operations. " alt="" coords="622,229,732,256"/>
</map>
</div>
</div><div class="textblock"><div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> This graph shows which files directly or indirectly include this file:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="communication_8h__dep__incl.png" border="0" usemap="#src_2communication_2communication_8hdep" alt=""/></div>
<map name="src_2communication_2communication_8hdep" id="src_2communication_2communication_8hdep">
<area shape="rect" id="node2" href="communication_8c.html" title="Communication Routines. " alt="" coords="4879,304,5138,331"/>
<area shape="rect" id="node3" href="communication_2gvt_8c.html" title="Distributed GVT Support module. " alt="" coords="5325,304,5503,331"/>
<area shape="rect" id="node4" href="mpi_8c.html" title="MPI Support Module. " alt="" coords="4489,379,4672,405"/>
<area shape="rect" id="node5" href="wnd_8c.html" title="Message delivery support. " alt="" coords="4750,379,4934,405"/>
<area shape="rect" id="node6" href="init_8c.html" title="Initialization routines. " alt="" coords="4437,304,4543,331"/>
<area shape="rect" id="node7" href="msgchannel_8c.html" title="A (M, 1) channel for messages. " alt="" coords="1302,80,1505,107"/>
<area shape="rect" id="node8" href="ccgs_8c.html" title="Consistent and Committed Global State. " alt="" coords="4303,304,4413,331"/>
<area shape="rect" id="node9" href="numerical_8c.html" title="Numerical Library. " alt="" coords="1335,304,1472,331"/>
<area shape="rect" id="node10" href="ecs_8c.html" title="Event &amp; Cross State Synchornization. " alt="" coords="196,304,304,331"/>
<area shape="rect" id="node11" href="state_8c.html" title="LP state management. " alt="" coords="3911,304,4029,331"/>
<area shape="rect" id="node12" href="queues_8c.html" title="Message queueing subsystem. " alt="" coords="726,304,881,331"/>
<area shape="rect" id="node13" href="control_8c.html" title="Processing points for control messages. " alt="" coords="5,304,172,331"/>
<area shape="rect" id="node14" href="process_8h.html" title="LP control blocks. " alt="" coords="2430,80,2603,107"/>
<area shape="rect" id="node28" href="scheduler_8h.html" title="The ROOT&#45;Sim scheduler main module header. " alt="" coords="2502,229,2686,256"/>
<area shape="rect" id="node35" href="scheduler_8c.html" title="The ROOT&#45;Sim scheduler main module. " alt="" coords="519,304,701,331"/>
<area shape="rect" id="node15" href="ult_8c.html" title="User&#45;Level Threads. " alt="" coords="2338,155,2442,181"/>
<area shape="rect" id="node16" href="core_8c.html" title="Core ROOT&#45;Sim functionalities. " alt="" coords="3332,304,3448,331"/>
<area shape="rect" id="node17" href="fossil_8c.html" title="Housekeeping operations. " alt="" coords="1950,304,2062,331"/>
<area shape="rect" id="node18" href="gvt_2gvt_8c.html" title="Global Virtual Time. " alt="" coords="3787,304,3887,331"/>
<area shape="rect" id="node19" href="costs_8c_source.html" title="src/lib/topology/costs.c" alt="" coords="328,304,495,331"/>
<area shape="rect" id="node20" href="obstacles_8c_source.html" title="src/lib/topology/obstacles.c" alt="" coords="1497,304,1691,331"/>
<area shape="rect" id="node21" href="probabilities_8c_source.html" title="src/lib/topology/probabilities.c" alt="" coords="1715,304,1926,331"/>
<area shape="rect" id="node22" href="topology_8c_source.html" title="src/lib/topology/topology.c" alt="" coords="2487,304,2674,331"/>
<area shape="rect" id="node23" href="main_8c.html" title="This module contains the entry point for the simulator, and some core functions. " alt="" coords="3674,304,3762,331"/>
<area shape="rect" id="node24" href="buddy_8c.html" title="A Buddy System implementation. " alt="" coords="3606,155,3729,181"/>
<area shape="rect" id="node25" href="checkpoints_8c.html" title="State saving and restore for model state buffers. " alt="" coords="955,304,1118,331"/>
<area shape="rect" id="node26" href="segment_8c.html" title="Segment allocator. " alt="" coords="1455,155,1597,181"/>
<area shape="rect" id="node27" href="queues_8h.html" title="Message queueing subsystem. " alt="" coords="4059,155,4214,181"/>
<area shape="rect" id="node32" href="binding_8c.html" title="Load sharing rules across worker threads. " alt="" coords="1142,304,1310,331"/>
<area shape="rect" id="node33" href="preempt_8c.html" title="LP preemption management. " alt="" coords="3472,304,3649,331"/>
<area shape="rect" id="node34" href="process_8c.html" title="Generic LP management functions. " alt="" coords="2291,304,2463,331"/>
<area shape="rect" id="node36" href="stf_8c.html" title="O(n) scheduling algorithm. " alt="" coords="5163,304,5300,331"/>
<area shape="rect" id="node38" href="statistics_8c.html" title="Statistics module. " alt="" coords="4053,304,4228,331"/>
<area shape="rect" id="node39" href="stf_8h.html" title="O(n) scheduling algorithm. " alt="" coords="2125,155,2263,181"/>
<area shape="rect" id="node40" href="statistics_8h.html" title="Statistics module. " alt="" coords="2811,155,2985,181"/>
<area shape="rect" id="node29" href="abm__layer_8c.html" title="This file contains the implementation of the the agent based modeling interface offered by ROOT&#45;Sim..." alt="" coords="3012,304,3152,331"/>
<area shape="rect" id="node30" href="wrapper_8c.html" title="stdlib wrapper " alt="" coords="2087,304,2267,331"/>
<area shape="rect" id="node31" href="dymelor_8c.html" title="Dynamic Memory Logger and Restorer (DyMeLoR) " alt="" coords="2851,304,2988,331"/>
<area shape="rect" id="node37" href="serial_8c.html" title="Serial scheduler. " alt="" coords="2698,304,2826,331"/>
<area shape="rect" id="node41" href="mpi_8h.html" title="MPI Support Module. " alt="" coords="4491,229,4675,256"/>
<area shape="rect" id="node43" href="init_8h.html" title="Initialization routines. " alt="" coords="2967,229,3075,256"/>
<area shape="rect" id="node42" href="wnd_8h.html" title="Message delivery support. " alt="" coords="4619,304,4804,331"/>
<area shape="rect" id="node44" href="thread_8c.html" title="Generic thread management facilities. " alt="" coords="3177,304,3307,331"/>
</map>
</div>
</div>
<p><a href="communication_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct__outgoing__t.html">_outgoing_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Per-LP buffer of newly-generated events.  <a href="struct__outgoing__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a14ef486128b10eab3ff55b61b9579bab"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="communication_8h.html#a14ef486128b10eab3ff55b61b9579bab">SLAB_MSG_SIZE</a>&#160;&#160;&#160;512</td></tr>
<tr class="memdesc:a14ef486128b10eab3ff55b61b9579bab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Slab allocator max message size.  <a href="#a14ef486128b10eab3ff55b61b9579bab">More...</a><br /></td></tr>
<tr class="separator:a14ef486128b10eab3ff55b61b9579bab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af684826e2bff53050734cd0006fbe7dd"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af684826e2bff53050734cd0006fbe7dd"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="communication_8h.html#af684826e2bff53050734cd0006fbe7dd">is_control_msg</a>(type)&#160;&#160;&#160;(type &gt;= <a class="el" href="communication_8h.html#aae2939440b2eb406455c0f4a361d92afae3a54d983325ffd785a263e26a638d38">MIN_VALUE_CONTROL</a> &amp;&amp; type != <a class="el" href="communication_8h.html#aae2939440b2eb406455c0f4a361d92afa50168e957cdc644f9b4a00dc1c7d0982">RENDEZVOUS_START</a>)</td></tr>
<tr class="memdesc:af684826e2bff53050734cd0006fbe7dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">This macro tells whether a message is a control message, by its type. <br /></td></tr>
<tr class="separator:af684826e2bff53050734cd0006fbe7dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24b4d86fc2ce94ddf7a41b1097cf6bdb"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="communication_8h.html#a24b4d86fc2ce94ddf7a41b1097cf6bdb">INIT_OUTGOING_MSG</a>&#160;&#160;&#160;8</td></tr>
<tr class="separator:a24b4d86fc2ce94ddf7a41b1097cf6bdb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a783078e33c0d29cd4efb4ffd085646d0"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct__outgoing__t.html">_outgoing_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="communication_8h.html#a783078e33c0d29cd4efb4ffd085646d0">outgoing_t</a></td></tr>
<tr class="memdesc:a783078e33c0d29cd4efb4ffd085646d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Per-LP buffer of newly-generated events.  <a href="#a783078e33c0d29cd4efb4ffd085646d0">More...</a><br /></td></tr>
<tr class="separator:a783078e33c0d29cd4efb4ffd085646d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:aae2939440b2eb406455c0f4a361d92af"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="communication_8h.html#aae2939440b2eb406455c0f4a361d92af">_control_msgs</a> { <br />
&#160;&#160;<b>RESERVED_MSG_CODE</b> = 65532, 
<a class="el" href="communication_8h.html#aae2939440b2eb406455c0f4a361d92afad8f47650b4bf790168c6d8e58e8489fe">TOPOLOGY_UPDATE</a>, 
<a class="el" href="communication_8h.html#aae2939440b2eb406455c0f4a361d92afaf9520da8492b410d65670f394a561b7a">ABM_UPDATE</a>, 
<a class="el" href="communication_8h.html#aae2939440b2eb406455c0f4a361d92afa9da53e26c516d8e01805cf5e9e53df6a">ABM_VISITING</a>, 
<br />
&#160;&#160;<a class="el" href="communication_8h.html#aae2939440b2eb406455c0f4a361d92afa96f9494c4247f6be4a1739e8bf86f6d4">ABM_LEAVING</a>, 
<a class="el" href="communication_8h.html#aae2939440b2eb406455c0f4a361d92afae3a54d983325ffd785a263e26a638d38">MIN_VALUE_CONTROL</a> = 65537, 
<a class="el" href="communication_8h.html#aae2939440b2eb406455c0f4a361d92afa50168e957cdc644f9b4a00dc1c7d0982">RENDEZVOUS_START</a>, 
<a class="el" href="communication_8h.html#aae2939440b2eb406455c0f4a361d92afad2f2ea6ad7e33781793f433c42a5314e">RENDEZVOUS_ACK</a>, 
<br />
&#160;&#160;<a class="el" href="communication_8h.html#aae2939440b2eb406455c0f4a361d92afa48f7be3732190e1cb332fbd9b859207b">RENDEZVOUS_UNBLOCK</a>, 
<a class="el" href="communication_8h.html#aae2939440b2eb406455c0f4a361d92afa1737b138a341b1a0fd8e31c05d2ac87b">RENDEZVOUS_ROLLBACK</a>, 
<a class="el" href="communication_8h.html#aae2939440b2eb406455c0f4a361d92afa146c40b816e40c94f84f2c3f849c5ba5">RENDEZVOUS_GET_PAGE</a>, 
<a class="el" href="communication_8h.html#aae2939440b2eb406455c0f4a361d92afaa29ca3948b775924af158d8fee567033">RENDEZVOUS_GET_PAGE_ACK</a>, 
<br />
&#160;&#160;<a class="el" href="communication_8h.html#aae2939440b2eb406455c0f4a361d92afa72866eb13d55436a6e62f403a05007e6">RENDEZVOUS_PAGE_WRITE_BACK</a>, 
<a class="el" href="communication_8h.html#aae2939440b2eb406455c0f4a361d92afa730a7b0c83aa1189baaed153e83a738e">MAX_VALUE_CONTROL</a>
<br />
 }<tr class="memdesc:aae2939440b2eb406455c0f4a361d92af"><td class="mdescLeft">&#160;</td><td class="mdescRight">Simulation Platform Control Messages.  <a href="communication_8h.html#aae2939440b2eb406455c0f4a361d92af">More...</a><br /></td></tr>
</td></tr>
<tr class="separator:aae2939440b2eb406455c0f4a361d92af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af16af3878a6f174b33162e0a84c1f483"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="communication_8h.html#af16af3878a6f174b33162e0a84c1f483">_mpi_tags</a> { <a class="el" href="communication_8h.html#af16af3878a6f174b33162e0a84c1f483af5670335963bb347a863ba089accd9ae">MSG_NEW_GVT</a> = 100, 
<a class="el" href="communication_8h.html#af16af3878a6f174b33162e0a84c1f483ad8468ea09626bc3944731cef10e54522">MSG_FINI</a>
 }<tr class="memdesc:af16af3878a6f174b33162e0a84c1f483"><td class="mdescLeft">&#160;</td><td class="mdescRight">Internal MPI tags.  <a href="communication_8h.html#af16af3878a6f174b33162e0a84c1f483">More...</a><br /></td></tr>
</td></tr>
<tr class="separator:af16af3878a6f174b33162e0a84c1f483"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ae0329023aeab7047bcb7b4708698a008"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="communication_8h.html#ae0329023aeab7047bcb7b4708698a008">ParallelScheduleNewEvent</a> (unsigned int, <a class="el" href="ROOT-Sim_8h.html#a8f79ad6880e99acb4edd079069847d9d">simtime_t</a>, unsigned int, void *, unsigned int)</td></tr>
<tr class="memdesc:ae0329023aeab7047bcb7b4708698a008"><td class="mdescLeft">&#160;</td><td class="mdescRight">Schedule a new message to some LP.  <a href="#ae0329023aeab7047bcb7b4708698a008">More...</a><br /></td></tr>
<tr class="separator:ae0329023aeab7047bcb7b4708698a008"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d1c122bc3538d94d6fd8328cd6c6a2d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="communication_8h.html#a9d1c122bc3538d94d6fd8328cd6c6a2d">communication_init</a> (void)</td></tr>
<tr class="memdesc:a9d1c122bc3538d94d6fd8328cd6c6a2d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the communication subsystem.  <a href="#a9d1c122bc3538d94d6fd8328cd6c6a2d">More...</a><br /></td></tr>
<tr class="separator:a9d1c122bc3538d94d6fd8328cd6c6a2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6bd2f352e0326608e9a2bef2efbde184"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="communication_8h.html#a6bd2f352e0326608e9a2bef2efbde184">communication_fini</a> (void)</td></tr>
<tr class="memdesc:a6bd2f352e0326608e9a2bef2efbde184"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finalize the communication subsystem.  <a href="#a6bd2f352e0326608e9a2bef2efbde184">More...</a><br /></td></tr>
<tr class="separator:a6bd2f352e0326608e9a2bef2efbde184"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5250867c0edfc326732c059b0c0c3b5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="communication_8h.html#ab5250867c0edfc326732c059b0c0c3b5">Send</a> (<a class="el" href="core_8h.html#abb831098e1334cd59d2c5e374416680e">msg_t</a> *msg)</td></tr>
<tr class="memdesc:ab5250867c0edfc326732c059b0c0c3b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a message.  <a href="#ab5250867c0edfc326732c059b0c0c3b5">More...</a><br /></td></tr>
<tr class="separator:ab5250867c0edfc326732c059b0c0c3b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae80f5356cc32f9f2373305341e409b3b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="communication_8h.html#ae80f5356cc32f9f2373305341e409b3b">insert_outgoing_msg</a> (<a class="el" href="core_8h.html#abb831098e1334cd59d2c5e374416680e">msg_t</a> *msg)</td></tr>
<tr class="memdesc:ae80f5356cc32f9f2373305341e409b3b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Place a message in the temporary LP outgoing buffer.  <a href="#ae80f5356cc32f9f2373305341e409b3b">More...</a><br /></td></tr>
<tr class="separator:ae80f5356cc32f9f2373305341e409b3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad154a0e0c0815b786ead70143505abd6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="communication_8h.html#ad154a0e0c0815b786ead70143505abd6">send_outgoing_msgs</a> (struct <a class="el" href="structlp__struct.html">lp_struct</a> *)</td></tr>
<tr class="memdesc:ad154a0e0c0815b786ead70143505abd6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send all pending outgoing messages.  <a href="#ad154a0e0c0815b786ead70143505abd6">More...</a><br /></td></tr>
<tr class="separator:ad154a0e0c0815b786ead70143505abd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8047651e174f4d26bef644233b5c8f8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="communication_8h.html#aa8047651e174f4d26bef644233b5c8f8">send_antimessages</a> (struct <a class="el" href="structlp__struct.html">lp_struct</a> *, <a class="el" href="ROOT-Sim_8h.html#a8f79ad6880e99acb4edd079069847d9d">simtime_t</a>)</td></tr>
<tr class="memdesc:aa8047651e174f4d26bef644233b5c8f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send all antimessages for a certain LP.  <a href="#aa8047651e174f4d26bef644233b5c8f8">More...</a><br /></td></tr>
<tr class="separator:aa8047651e174f4d26bef644233b5c8f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a762b3dacaa82c4590e0572ac08117153"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="communication_8h.html#a762b3dacaa82c4590e0572ac08117153">msg_hdr_release</a> (<a class="el" href="core_8h.html#ab4ec065a56677fd6e8eb5d360aad06e2">msg_hdr_t</a> *msg)</td></tr>
<tr class="memdesc:a762b3dacaa82c4590e0572ac08117153"><td class="mdescLeft">&#160;</td><td class="mdescRight">Release a message header.  <a href="#a762b3dacaa82c4590e0572ac08117153">More...</a><br /></td></tr>
<tr class="separator:a762b3dacaa82c4590e0572ac08117153"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afff0e221f1375dfb80dd4ca64b01a26e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="core_8h.html#abb831098e1334cd59d2c5e374416680e">msg_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="communication_8h.html#afff0e221f1375dfb80dd4ca64b01a26e">get_msg_from_slab</a> (struct <a class="el" href="structlp__struct.html">lp_struct</a> *)</td></tr>
<tr class="memdesc:afff0e221f1375dfb80dd4ca64b01a26e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a buffer to keep a message.  <a href="#afff0e221f1375dfb80dd4ca64b01a26e">More...</a><br /></td></tr>
<tr class="separator:afff0e221f1375dfb80dd4ca64b01a26e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30a6ca7540bd034f2f4fa9ddceed6441"><td class="memItemLeft" align="right" valign="top"><a class="el" href="core_8h.html#ab4ec065a56677fd6e8eb5d360aad06e2">msg_hdr_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="communication_8h.html#a30a6ca7540bd034f2f4fa9ddceed6441">get_msg_hdr_from_slab</a> (struct <a class="el" href="structlp__struct.html">lp_struct</a> *)</td></tr>
<tr class="memdesc:a30a6ca7540bd034f2f4fa9ddceed6441"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a buffer to keep a message header.  <a href="#a30a6ca7540bd034f2f4fa9ddceed6441">More...</a><br /></td></tr>
<tr class="separator:a30a6ca7540bd034f2f4fa9ddceed6441"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56a4865196c169691525e99bae337519"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="communication_8h.html#a56a4865196c169691525e99bae337519">pack_msg</a> (<a class="el" href="core_8h.html#abb831098e1334cd59d2c5e374416680e">msg_t</a> **msg, <a class="el" href="core_8h.html#a74ea65c5dea49dba0b0c4b3bb8ee47f1">GID_t</a> sender, <a class="el" href="core_8h.html#a74ea65c5dea49dba0b0c4b3bb8ee47f1">GID_t</a> receiver, int type, <a class="el" href="ROOT-Sim_8h.html#a8f79ad6880e99acb4edd079069847d9d">simtime_t</a> timestamp, <a class="el" href="ROOT-Sim_8h.html#a8f79ad6880e99acb4edd079069847d9d">simtime_t</a> send_time, size_t size, void *payload)</td></tr>
<tr class="memdesc:a56a4865196c169691525e99bae337519"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pack a message in a platform-level data structure.  <a href="#a56a4865196c169691525e99bae337519">More...</a><br /></td></tr>
<tr class="separator:a56a4865196c169691525e99bae337519"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91ccc25aa3eaa49ec96ea9328aa99dbd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="communication_8h.html#a91ccc25aa3eaa49ec96ea9328aa99dbd">msg_to_hdr</a> (<a class="el" href="core_8h.html#ab4ec065a56677fd6e8eb5d360aad06e2">msg_hdr_t</a> *hdr, <a class="el" href="core_8h.html#abb831098e1334cd59d2c5e374416680e">msg_t</a> *msg)</td></tr>
<tr class="memdesc:a91ccc25aa3eaa49ec96ea9328aa99dbd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert a message to a message header.  <a href="#a91ccc25aa3eaa49ec96ea9328aa99dbd">More...</a><br /></td></tr>
<tr class="separator:a91ccc25aa3eaa49ec96ea9328aa99dbd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5bbdfc874efd40b9126ce2202fb19534"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="communication_8h.html#a5bbdfc874efd40b9126ce2202fb19534">hdr_to_msg</a> (<a class="el" href="core_8h.html#ab4ec065a56677fd6e8eb5d360aad06e2">msg_hdr_t</a> *hdr, <a class="el" href="core_8h.html#abb831098e1334cd59d2c5e374416680e">msg_t</a> *msg)</td></tr>
<tr class="memdesc:a5bbdfc874efd40b9126ce2202fb19534"><td class="mdescLeft">&#160;</td><td class="mdescRight">convert a message header into a message  <a href="#a5bbdfc874efd40b9126ce2202fb19534">More...</a><br /></td></tr>
<tr class="separator:a5bbdfc874efd40b9126ce2202fb19534"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a323ad017762155352c38983e67e8adeb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="communication_8h.html#a323ad017762155352c38983e67e8adeb">msg_release</a> (<a class="el" href="core_8h.html#abb831098e1334cd59d2c5e374416680e">msg_t</a> *msg)</td></tr>
<tr class="memdesc:a323ad017762155352c38983e67e8adeb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Release a message buffer.  <a href="#a323ad017762155352c38983e67e8adeb">More...</a><br /></td></tr>
<tr class="separator:a323ad017762155352c38983e67e8adeb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5d2aab0b4d3d676e4a8fd2d3d6e7bf9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="communication_8h.html#ac5d2aab0b4d3d676e4a8fd2d3d6e7bf9">dump_msg_content</a> (<a class="el" href="core_8h.html#abb831098e1334cd59d2c5e374416680e">msg_t</a> *msg)</td></tr>
<tr class="memdesc:ac5d2aab0b4d3d676e4a8fd2d3d6e7bf9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Dump the content of a message.  <a href="#ac5d2aab0b4d3d676e4a8fd2d3d6e7bf9">More...</a><br /></td></tr>
<tr class="separator:ac5d2aab0b4d3d676e4a8fd2d3d6e7bf9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aebec05b86f3467473116d555954b80f4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="communication_8h.html#aebec05b86f3467473116d555954b80f4">validate_msg</a> (<a class="el" href="core_8h.html#abb831098e1334cd59d2c5e374416680e">msg_t</a> *msg)</td></tr>
<tr class="memdesc:aebec05b86f3467473116d555954b80f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Perform some sanity checks on a message buffer.  <a href="#aebec05b86f3467473116d555954b80f4">More...</a><br /></td></tr>
<tr class="separator:aebec05b86f3467473116d555954b80f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Communication Routines. </p>
<p>This file contains all the communication routines, for exchanging messages among different logical processes and simulator instances.</p>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright (C) 2008-2019 HPDCS Group <a href="https://hpdcs.github.io">https://hpdcs.github.io</a></dd></dl>
<p>This file is part of ROOT-Sim (ROme OpTimistic Simulator).</p>
<p>ROOT-Sim is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation; only version 3 of the License applies.</p>
<p>ROOT-Sim is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</p>
<p>You should have received a copy of the GNU General Public License along with ROOT-Sim; if not, write to the Free Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA</p>
<dl class="section author"><dt>Author</dt><dd>Francesco Quaglia </dd>
<dd>
Roberto Vitali </dd>
<dd>
Alessandro Pellegrini </dd></dl>

<p>Definition in file <a class="el" href="communication_8h_source.html">communication.h</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a24b4d86fc2ce94ddf7a41b1097cf6bdb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define INIT_OUTGOING_MSG&#160;&#160;&#160;8</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>For performance reasons, while executing an event, newly-generated events are packed and pre-buffered in a per-LP data structure defined by the <a class="el" href="communication_8h.html#a783078e33c0d29cd4efb4ffd085646d0">outgoing_t</a> type. This implements a resizable array of pointers to <a class="el" href="core_8h.html#abb831098e1334cd59d2c5e374416680e">msg_t</a> types. Anytime that an event generates more new events than currently supported, the array is doubled in size.</p>
<p>This macro tells the number of pointers to <a class="el" href="core_8h.html#abb831098e1334cd59d2c5e374416680e">msg_t</a> which is allocated in the resizable array, for each LP, when the simulation starts. </p>

<p>Definition at line <a class="el" href="communication_8h_source.html#l00101">101</a> of file <a class="el" href="communication_8h_source.html">communication.h</a>.</p>

</div>
</div>
<a class="anchor" id="a14ef486128b10eab3ff55b61b9579bab"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SLAB_MSG_SIZE&#160;&#160;&#160;512</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Slab allocator max message size. </p>
<p>This is the size in bytes of a slab from the message slab allocator. If messages are smaller than this size, then message buffers are taken from the slab. Otherwise, the buddy system is queried directly. </p>

<p>Definition at line <a class="el" href="communication_8h_source.html#l00043">43</a> of file <a class="el" href="communication_8h_source.html">communication.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="a783078e33c0d29cd4efb4ffd085646d0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct__outgoing__t.html">_outgoing_t</a>  <a class="el" href="communication_8h.html#a783078e33c0d29cd4efb4ffd085646d0">outgoing_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Per-LP buffer of newly-generated events. </p>
<p>For performance reasons, while executing an event, newly-generated events are packed and pre-buffered in a per-LP data structure defined by the <a class="el" href="communication_8h.html#a783078e33c0d29cd4efb4ffd085646d0">outgoing_t</a> type. This implements a resizable array of pointers to <a class="el" href="core_8h.html#abb831098e1334cd59d2c5e374416680e">msg_t</a> types. Anytime that an event generates more new events than currently supported, the array is doubled in size.</p>
<p>This structure is used by the communication subsystem to handle outgoing messages. At simulation startup, there is space for at most <a class="el" href="communication_8h.html#a24b4d86fc2ce94ddf7a41b1097cf6bdb">INIT_OUTGOING_MSG</a> messages.</p>
<p>The structure keeps pointers to messages which have been packed using the <a class="el" href="communication_8c.html#a56a4865196c169691525e99bae337519" title="Pack a message in a platform-level data structure. ">pack_msg()</a> function. This allows to implement from the beginning a zero-copy message passing policy. </p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a class="anchor" id="aae2939440b2eb406455c0f4a361d92af"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="communication_8h.html#aae2939440b2eb406455c0f4a361d92af">_control_msgs</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Simulation Platform Control Messages. </p>
<p>In some circumstances, ROOT-Sim wants to send to a certain LP a message which should not be actually delivered to the simulation model. These are what are referred to as control messages, and are used to implement some sort of distributed (asynchronous) state changes at specific LPs.</p>
<p>To properly manage control messages, they must be declared in this enum. Note that the special <a class="el" href="communication_8h.html#aae2939440b2eb406455c0f4a361d92afae3a54d983325ffd785a263e26a638d38">MIN_VALUE_CONTROL</a> is used to reserve space for application message codes. Anything below that value is considered to be a model-specific message code. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="aae2939440b2eb406455c0f4a361d92afad8f47650b4bf790168c6d8e58e8489fe"></a>TOPOLOGY_UPDATE&#160;</td><td class="fielddoc">
<p>Used by the topology API to convey remote updates on costs/probabilities </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="aae2939440b2eb406455c0f4a361d92afaf9520da8492b410d65670f394a561b7a"></a>ABM_UPDATE&#160;</td><td class="fielddoc">
<p>Used by ABM API, right now these are treated as normal positive messages </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="aae2939440b2eb406455c0f4a361d92afa9da53e26c516d8e01805cf5e9e53df6a"></a>ABM_VISITING&#160;</td><td class="fielddoc">
<p>Used by ABM API, right now these are treated as normal positive messages </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="aae2939440b2eb406455c0f4a361d92afa96f9494c4247f6be4a1739e8bf86f6d4"></a>ABM_LEAVING&#160;</td><td class="fielddoc">
<p>Used by ABM API, right now these are treated as normal positive messages </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="aae2939440b2eb406455c0f4a361d92afae3a54d983325ffd785a263e26a638d38"></a>MIN_VALUE_CONTROL&#160;</td><td class="fielddoc">
<p>Separation value between model and platform messages. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="aae2939440b2eb406455c0f4a361d92afa50168e957cdc644f9b4a00dc1c7d0982"></a>RENDEZVOUS_START&#160;</td><td class="fielddoc">
<p>ECS protocol: start synchronizing two LPs for a page fault. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="aae2939440b2eb406455c0f4a361d92afad2f2ea6ad7e33781793f433c42a5314e"></a>RENDEZVOUS_ACK&#160;</td><td class="fielddoc">
<p>ECS protocol: the sender LP has been synchronized and is now blocked. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="aae2939440b2eb406455c0f4a361d92afa48f7be3732190e1cb332fbd9b859207b"></a>RENDEZVOUS_UNBLOCK&#160;</td><td class="fielddoc">
<p>ECS protocol: the destination LP can resume its normal execution. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="aae2939440b2eb406455c0f4a361d92afa1737b138a341b1a0fd8e31c05d2ac87b"></a>RENDEZVOUS_ROLLBACK&#160;</td><td class="fielddoc">
<p>ECS protocol: an ECS synchronization should be rolled back. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="aae2939440b2eb406455c0f4a361d92afa146c40b816e40c94f84f2c3f849c5ba5"></a>RENDEZVOUS_GET_PAGE&#160;</td><td class="fielddoc">
<p>ECS protocol: a remote LP is asked for a certain set of pages. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="aae2939440b2eb406455c0f4a361d92afaa29ca3948b775924af158d8fee567033"></a>RENDEZVOUS_GET_PAGE_ACK&#160;</td><td class="fielddoc">
<p>ECS protocol: the sender LP is giving a lease on a set of pages. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="aae2939440b2eb406455c0f4a361d92afa72866eb13d55436a6e62f403a05007e6"></a>RENDEZVOUS_PAGE_WRITE_BACK&#160;</td><td class="fielddoc">
<p>ECS protocol: modified pages are sent back to the owner LP. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="aae2939440b2eb406455c0f4a361d92afa730a7b0c83aa1189baaed153e83a738e"></a>MAX_VALUE_CONTROL&#160;</td><td class="fielddoc">
<p>Anything after this value is considered as an impossible message. </p>
</td></tr>
</table>

<p>Definition at line <a class="el" href="communication_8h_source.html#l00058">58</a> of file <a class="el" href="communication_8h_source.html">communication.h</a>.</p>

</div>
</div>
<a class="anchor" id="af16af3878a6f174b33162e0a84c1f483"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="communication_8h.html#af16af3878a6f174b33162e0a84c1f483">_mpi_tags</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Internal MPI tags. </p>
<p>This <code>enum</code> defines the MPI tags which are internally used by the simulation runtime environment to exchange messages which are used to synchronize upon specific activities. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="af16af3878a6f174b33162e0a84c1f483af5670335963bb347a863ba089accd9ae"></a>MSG_NEW_GVT&#160;</td><td class="fielddoc">
<p>Master notifies the new GVT. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="af16af3878a6f174b33162e0a84c1f483ad8468ea09626bc3944731cef10e54522"></a>MSG_FINI&#160;</td><td class="fielddoc">
<p>One rank informs the others that the simulation has to be stopped. </p>
</td></tr>
</table>

<p>Definition at line <a class="el" href="communication_8h_source.html#l00086">86</a> of file <a class="el" href="communication_8h_source.html">communication.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a6bd2f352e0326608e9a2bef2efbde184"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void communication_fini </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Finalize the communication subsystem. </p>
<p>This function finalizes the communication subsystem. It is called by at simulation shutdown, both if the simulation was successful or if it failed. This is the place where to cleanly shutdown the communication subsystem. </p>

<p>Definition at line <a class="el" href="communication_8c_source.html#l00075">75</a> of file <a class="el" href="communication_8c_source.html">communication.c</a>.</p>

<p><div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="communication_8h_a6bd2f352e0326608e9a2bef2efbde184_cgraph.png" border="0" usemap="#communication_8h_a6bd2f352e0326608e9a2bef2efbde184_cgraph" alt=""/></div>
<map name="communication_8h_a6bd2f352e0326608e9a2bef2efbde184_cgraph" id="communication_8h_a6bd2f352e0326608e9a2bef2efbde184_cgraph">
<area shape="rect" id="node2" href="mpi_8c.html#a38b0bdfeab3308a62e50dc362ebd2a68" title="Finalize inter&#45;kernel communication. " alt="" coords="200,31,396,57"/>
<area shape="rect" id="node8" href="mpi_8c.html#a7210aa16a06c6aab812ae96561c30a8d" title="Finalize MPI. " alt="" coords="249,81,347,108"/>
<area shape="rect" id="node3" href="mpi_8c.html#a3ac4bf6fda6cd92f529134aac34edabf" title="Cleanup routine of the distributed termination subsystem. " alt="" coords="444,5,621,32"/>
<area shape="rect" id="node4" href="communication_2gvt_8c.html#ac35f5f227c553fffd0911c995c865e17" title="Shut down the MPI&#45;based distributed GVT reduction submodule. " alt="" coords="462,56,603,83"/>
<area shape="rect" id="node5" href="communication_2gvt_8c.html#abb460bc63d1b830804752ce6bdd4e30a" title="Check if there are pending GVT&#45;init messages around. " alt="" coords="669,31,796,57"/>
<area shape="rect" id="node7" href="communication_2gvt_8c.html#a97741fc617b443cee108c44a26cd513b" title="Forcely extract GVT&#45;init message from MPI. " alt="" coords="679,81,786,108"/>
<area shape="rect" id="node6" href="mpi_8c.html#a621b43e2d97c134914cb2737e13e97e2" title="Check if there are pending messages. " alt="" coords="844,31,959,57"/>
</map>
</div>
</p>

<p><div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="communication_8h_a6bd2f352e0326608e9a2bef2efbde184_icgraph.png" border="0" usemap="#communication_8h_a6bd2f352e0326608e9a2bef2efbde184_icgraph" alt=""/></div>
<map name="communication_8h_a6bd2f352e0326608e9a2bef2efbde184_icgraph" id="communication_8h_a6bd2f352e0326608e9a2bef2efbde184_icgraph">
<area shape="rect" id="node2" href="core_8h.html#a8f346536ccfbe77b78ed577674beb6cf" title="simulation_shutdown" alt="" coords="200,51,356,77"/>
<area shape="rect" id="node3" href="core_8c.html#a9b05d2af2e233e2616633eaa706682ee" title="exit_from_simulation\l_model" alt="" coords="407,9,562,50"/>
<area shape="rect" id="node7" href="main_8c.html#aa729cb27350c33119484501e13df4fec" title="main_simulation_loop" alt="" coords="404,85,565,112"/>
<area shape="rect" id="node4" href="core_8h.html#a7fb819521b1ab5fc7644ad216fe7b465" title="base_init" alt="" coords="635,5,713,32"/>
<area shape="rect" id="node5" href="init_8h.html#a417eb072179d09f441dbae3125049e46" title="SystemInit" alt="" coords="783,5,873,32"/>
<area shape="rect" id="node6" href="main_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="921,31,976,57"/>
<area shape="rect" id="node8" href="main_8c.html#af2ac8c142556588d87e6c069a4ca9894" title="end_computing" alt="" coords="613,107,735,133"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a9d1c122bc3538d94d6fd8328cd6c6a2d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void communication_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the communication subsystem. </p>
<p>This function initializes the communication subsystem. It is called by the init module upon simulation startup. Any initialization of this subsystem should be placed here. </p>

<p>Definition at line <a class="el" href="communication_8c_source.html#l00059">59</a> of file <a class="el" href="communication_8c_source.html">communication.c</a>.</p>

<p><div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><img src="communication_8h_a9d1c122bc3538d94d6fd8328cd6c6a2d_cgraph.png" border="0" usemap="#communication_8h_a9d1c122bc3538d94d6fd8328cd6c6a2d_cgraph" alt=""/></div>
<map name="communication_8h_a9d1c122bc3538d94d6fd8328cd6c6a2d_cgraph" id="communication_8h_a9d1c122bc3538d94d6fd8328cd6c6a2d_cgraph">
<area shape="rect" id="node2" href="mpi_8c.html#aae0b9d97e0c3d31df6e27e2455e66a13" title="Initialize inter&#45;kernel communication. " alt="" coords="200,81,371,108"/>
<area shape="rect" id="node3" href="wnd_8c.html#a620f72de0294d3c638894de54d14ea27" title="Outgoing queue initialization. " alt="" coords="419,5,575,32"/>
<area shape="rect" id="node4" href="communication_2gvt_8c.html#ae0cb1aa4dae8060ac662c0534849ecf3" title="Initialize the MPI&#45;based distributed GVT reduction submodule. " alt="" coords="439,56,555,83"/>
<area shape="rect" id="node5" href="mpi_8c.html#a6e129776fd0d7fc31a255a396ce28c39" title="Setup the distributed termination subsystem. " alt="" coords="421,107,573,133"/>
<area shape="rect" id="node6" href="mpi_8c.html#a013115e2b9fb4af92de3a6b212fc8065" title="Initialize MPI Datatype and Operation for statistics reduction. " alt="" coords="423,157,570,184"/>
<area shape="rect" id="node7" href="mpi_8c.html#ace2c9a712d7d5f8e73dda54c9de3e358" title="Reduce operation for statistics. " alt="" coords="623,157,768,184"/>
</map>
</div>
</p>

<p><div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><img src="communication_8h_a9d1c122bc3538d94d6fd8328cd6c6a2d_icgraph.png" border="0" usemap="#communication_8h_a9d1c122bc3538d94d6fd8328cd6c6a2d_icgraph" alt=""/></div>
<map name="communication_8h_a9d1c122bc3538d94d6fd8328cd6c6a2d_icgraph" id="communication_8h_a9d1c122bc3538d94d6fd8328cd6c6a2d_icgraph">
<area shape="rect" id="node2" href="init_8h.html#a417eb072179d09f441dbae3125049e46" title="SystemInit" alt="" coords="200,5,291,32"/>
<area shape="rect" id="node3" href="main_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="339,5,393,32"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac5d2aab0b4d3d676e4a8fd2d3d6e7bf9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dump_msg_content </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="core_8h.html#abb831098e1334cd59d2c5e374416680e">msg_t</a> *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Dump the content of a message. </p>
<p>This function dumps the content of a message. This is mainly used when some runtime error is encountered, to provide on screen information which might be used for debugging what is going on.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>A pointer to the message to dump on screen. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="communication_8c_source.html#l00589">589</a> of file <a class="el" href="communication_8c_source.html">communication.c</a>.</p>

<p><div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><img src="communication_8h_ac5d2aab0b4d3d676e4a8fd2d3d6e7bf9_icgraph.png" border="0" usemap="#communication_8h_ac5d2aab0b4d3d676e4a8fd2d3d6e7bf9_icgraph" alt=""/></div>
<map name="communication_8h_ac5d2aab0b4d3d676e4a8fd2d3d6e7bf9_icgraph" id="communication_8h_ac5d2aab0b4d3d676e4a8fd2d3d6e7bf9_icgraph">
<area shape="rect" id="node2" href="queues_8h.html#a54eca9bfa893cac072d1b1d3010c2944" title="process_bottom_halves" alt="" coords="204,62,379,89"/>
<area shape="rect" id="node3" href="gvt_2gvt_8h.html#a234e866bb1e37fa25dec9bb40134234d" title="get_last_gvt" alt="" coords="427,62,527,89"/>
<area shape="rect" id="node5" href="main_8c.html#aa729cb27350c33119484501e13df4fec" title="main_simulation_loop" alt="" coords="1087,118,1248,145"/>
<area shape="rect" id="node4" href="main_8c.html#af2ac8c142556588d87e6c069a4ca9894" title="end_computing" alt="" coords="1296,110,1417,137"/>
<area shape="rect" id="node7" href="statistics_8c.html#ab7b584959699657a63a49384f07fd7a9" title="format_size" alt="" coords="575,62,672,89"/>
<area shape="rect" id="node6" href="main_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="1604,124,1659,150"/>
<area shape="rect" id="node8" href="statistics_8h.html#aeff52bbf045362270639b2baed20762b" title="statistics_stop" alt="" coords="720,62,835,89"/>
<area shape="rect" id="node9" href="core_8h.html#a8f346536ccfbe77b78ed577674beb6cf" title="simulation_shutdown" alt="" coords="883,62,1039,89"/>
<area shape="rect" id="node10" href="core_8c.html#a9b05d2af2e233e2616633eaa706682ee" title="exit_from_simulation\l_model" alt="" coords="1090,52,1245,94"/>
<area shape="rect" id="node11" href="core_8h.html#a7fb819521b1ab5fc7644ad216fe7b465" title="base_init" alt="" coords="1317,60,1396,86"/>
<area shape="rect" id="node12" href="init_8h.html#a417eb072179d09f441dbae3125049e46" title="SystemInit" alt="" coords="1465,85,1556,112"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="afff0e221f1375dfb80dd4ca64b01a26e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="core_8h.html#abb831098e1334cd59d2c5e374416680e">msg_t</a>* get_msg_from_slab </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlp__struct.html">lp_struct</a> *&#160;</td>
          <td class="paramname"><em>lp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a buffer to keep a message. </p>
<p>This function allocates a buffer from the slab of the LP identified by the specified <a class="el" href="structlp__struct.html">lp_struct</a> to keep a message.</p>
<dl class="section warning"><dt>Warning</dt><dd>The slab allocator is configured at simulation startup to keep buffers of size <a class="el" href="communication_8h.html#a14ef486128b10eab3ff55b61b9579bab">SLAB_MSG_SIZE</a>. The type <a class="el" href="core_8h.html#abb831098e1334cd59d2c5e374416680e">msg_t</a> uses a flexible array (the <code>event_content</code> member) to keep also the model-specific payload. Therefore, if the size of the payload is such that <code>sizeof(msg_t)+payload</code> is larger that <a class="el" href="communication_8h.html#a14ef486128b10eab3ff55b61b9579bab">SLAB_MSG_SIZE</a>, relying on this function to allocate a <a class="el" href="core_8h.html#abb831098e1334cd59d2c5e374416680e">msg_t</a> will generate a memory overflow. <b>ALWAYS</b> check the size of the payload before getting a message buffer from here!</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">lp</td><td>A pointer to the <a class="el" href="structlp__struct.html">lp_struct</a> where to take the message buffer from. The slab allocator of the LP is used.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to the freshly allocated buffer. It is large enough to keep a <a class="el" href="core_8h.html#abb831098e1334cd59d2c5e374416680e">msg_t</a> datatype, but it might be too small to also keep the event payload. </dd></dl>

<p>Definition at line <a class="el" href="communication_8c_source.html#l00192">192</a> of file <a class="el" href="communication_8c_source.html">communication.c</a>.</p>

<p><div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><img src="communication_8h_afff0e221f1375dfb80dd4ca64b01a26e_icgraph.png" border="0" usemap="#communication_8h_afff0e221f1375dfb80dd4ca64b01a26e_icgraph" alt=""/></div>
<map name="communication_8h_afff0e221f1375dfb80dd4ca64b01a26e_icgraph" id="communication_8h_afff0e221f1375dfb80dd4ca64b01a26e_icgraph">
<area shape="rect" id="node2" href="communication_8h.html#a30a6ca7540bd034f2f4fa9ddceed6441" title="Get a buffer to keep a message header. " alt="" coords="201,144,377,171"/>
<area shape="rect" id="node16" href="communication_8h.html#aa8047651e174f4d26bef644233b5c8f8" title="Send all antimessages for a certain LP. " alt="" coords="214,93,365,120"/>
<area shape="rect" id="node18" href="communication_8h.html#a56a4865196c169691525e99bae337519" title="Pack a message in a platform&#45;level data structure. " alt="" coords="246,195,333,221"/>
<area shape="rect" id="node21" href="mpi_8h.html#ad243611fd168b265105bce70c193394d" title="Receive remote messages. " alt="" coords="632,43,796,69"/>
<area shape="rect" id="node3" href="communication_8h.html#ad154a0e0c0815b786ead70143505abd6" title="Send all pending outgoing messages. " alt="" coords="425,144,584,171"/>
<area shape="rect" id="node4" href="scheduler_8h.html#ac48128e72b303ea22d8ec641a9516b15" title="schedule" alt="" coords="675,119,753,145"/>
<area shape="rect" id="node5" href="gvt_2gvt_8h.html#a234e866bb1e37fa25dec9bb40134234d" title="get_last_gvt" alt="" coords="889,68,989,95"/>
<area shape="rect" id="node7" href="main_8c.html#aa729cb27350c33119484501e13df4fec" title="main_simulation_loop" alt="" coords="1671,93,1832,120"/>
<area shape="rect" id="node6" href="main_8c.html#af2ac8c142556588d87e6c069a4ca9894" title="end_computing" alt="" coords="1484,93,1605,120"/>
<area shape="rect" id="node9" href="queues_8h.html#a54eca9bfa893cac072d1b1d3010c2944" title="process_bottom_halves" alt="" coords="1081,43,1256,69"/>
<area shape="rect" id="node10" href="statistics_8c.html#ab7b584959699657a63a49384f07fd7a9" title="format_size" alt="" coords="1120,144,1217,171"/>
<area shape="rect" id="node8" href="main_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="2145,125,2200,152"/>
<area shape="rect" id="node11" href="statistics_8h.html#aeff52bbf045362270639b2baed20762b" title="statistics_stop" alt="" coords="1304,144,1419,171"/>
<area shape="rect" id="node12" href="core_8h.html#a8f346536ccfbe77b78ed577674beb6cf" title="simulation_shutdown" alt="" coords="1467,144,1623,171"/>
<area shape="rect" id="node13" href="core_8c.html#a9b05d2af2e233e2616633eaa706682ee" title="exit_from_simulation\l_model" alt="" coords="1674,145,1829,186"/>
<area shape="rect" id="node14" href="core_8h.html#a7fb819521b1ab5fc7644ad216fe7b465" title="base_init" alt="" coords="1880,152,1959,179"/>
<area shape="rect" id="node15" href="init_8h.html#a417eb072179d09f441dbae3125049e46" title="SystemInit" alt="" coords="2007,152,2097,179"/>
<area shape="rect" id="node17" href="state_8h.html#a1fd6b7926db41257e07600226d87fffa" title="rollback" alt="" coords="469,93,540,120"/>
<area shape="rect" id="node19" href="communication_8h.html#ae0329023aeab7047bcb7b4708698a008" title="Schedule a new message to some LP. " alt="" coords="844,245,1033,272"/>
<area shape="rect" id="node20" href="scheduler_8h.html#a1b1b085c6b05a9d202a1629dcd71cffe" title="LP_main_loop" alt="" coords="449,195,560,221"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a30a6ca7540bd034f2f4fa9ddceed6441"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="core_8h.html#ab4ec065a56677fd6e8eb5d360aad06e2">msg_hdr_t</a>* get_msg_hdr_from_slab </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlp__struct.html">lp_struct</a> *&#160;</td>
          <td class="paramname"><em>lp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a buffer to keep a message header. </p>
<p>Message headers are the compact way used to represent antimessages. This function retrieves a buffer to keep a message header. Antimessages are associated with the sender LP, so the <a class="el" href="structlp__struct.html">lp_struct</a> used here must be the one of the sender LP.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">lp</td><td>A pointer to the <a class="el" href="structlp__struct.html">lp_struct</a> where to take the message header from. The slab allocator of the LP is used.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to the freshly allocated buffer. It is large enough to keep a <a class="el" href="core_8h.html#ab4ec065a56677fd6e8eb5d360aad06e2">msg_hdr_t</a> datatype. </dd></dl>

<p>Definition at line <a class="el" href="communication_8c_source.html#l00160">160</a> of file <a class="el" href="communication_8c_source.html">communication.c</a>.</p>

<p><div id="dynsection-8" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><img src="communication_8h_a30a6ca7540bd034f2f4fa9ddceed6441_cgraph.png" border="0" usemap="#communication_8h_a30a6ca7540bd034f2f4fa9ddceed6441_cgraph" alt=""/></div>
<map name="communication_8h_a30a6ca7540bd034f2f4fa9ddceed6441_cgraph" id="communication_8h_a30a6ca7540bd034f2f4fa9ddceed6441_cgraph">
<area shape="rect" id="node2" href="communication_8c.html#ab957dc2cd186382c50ef8cfde9761909" title="Get a buffer to keep a message. " alt="" coords="229,5,377,32"/>
</map>
</div>
</p>

<p><div id="dynsection-9" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><img src="communication_8h_a30a6ca7540bd034f2f4fa9ddceed6441_icgraph.png" border="0" usemap="#communication_8h_a30a6ca7540bd034f2f4fa9ddceed6441_icgraph" alt=""/></div>
<map name="communication_8h_a30a6ca7540bd034f2f4fa9ddceed6441_icgraph" id="communication_8h_a30a6ca7540bd034f2f4fa9ddceed6441_icgraph">
<area shape="rect" id="node2" href="communication_8h.html#ad154a0e0c0815b786ead70143505abd6" title="Send all pending outgoing messages. " alt="" coords="229,143,388,170"/>
<area shape="rect" id="node3" href="scheduler_8h.html#ac48128e72b303ea22d8ec641a9516b15" title="schedule" alt="" coords="436,143,515,170"/>
<area shape="rect" id="node4" href="gvt_2gvt_8h.html#a234e866bb1e37fa25dec9bb40134234d" title="get_last_gvt" alt="" coords="563,118,663,145"/>
<area shape="rect" id="node6" href="main_8c.html#aa729cb27350c33119484501e13df4fec" title="main_simulation_loop" alt="" coords="1300,71,1461,98"/>
<area shape="rect" id="node5" href="main_8c.html#af2ac8c142556588d87e6c069a4ca9894" title="end_computing" alt="" coords="1113,67,1235,94"/>
<area shape="rect" id="node8" href="queues_8h.html#a54eca9bfa893cac072d1b1d3010c2944" title="process_bottom_halves" alt="" coords="711,118,885,145"/>
<area shape="rect" id="node9" href="statistics_8c.html#ab7b584959699657a63a49384f07fd7a9" title="format_size" alt="" coords="749,17,847,43"/>
<area shape="rect" id="node7" href="main_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="1775,42,1829,69"/>
<area shape="rect" id="node10" href="statistics_8h.html#aeff52bbf045362270639b2baed20762b" title="statistics_stop" alt="" coords="933,17,1048,43"/>
<area shape="rect" id="node11" href="core_8h.html#a8f346536ccfbe77b78ed577674beb6cf" title="simulation_shutdown" alt="" coords="1096,17,1252,43"/>
<area shape="rect" id="node12" href="core_8c.html#a9b05d2af2e233e2616633eaa706682ee" title="exit_from_simulation\l_model" alt="" coords="1303,5,1458,47"/>
<area shape="rect" id="node13" href="core_8h.html#a7fb819521b1ab5fc7644ad216fe7b465" title="base_init" alt="" coords="1509,14,1588,41"/>
<area shape="rect" id="node14" href="init_8h.html#a417eb072179d09f441dbae3125049e46" title="SystemInit" alt="" coords="1636,15,1727,42"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a5bbdfc874efd40b9126ce2202fb19534"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void hdr_to_msg </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="core_8h.html#ab4ec065a56677fd6e8eb5d360aad06e2">msg_hdr_t</a> *&#160;</td>
          <td class="paramname"><em>hdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="core_8h.html#abb831098e1334cd59d2c5e374416680e">msg_t</a> *&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>convert a message header into a message </p>
<p>This is a commodity function which prepares a message data structure from a message header. Both the header and the message buffers must be already allocated.</p>
<p>The purpose of this function is to prepare the sending of an antimessage. Indeed, an antimessage is sent as a message of size zero, and the information is taken from compact versions of the originally sent messages, kept in the <a class="el" href="core_8h.html#ab4ec065a56677fd6e8eb5d360aad06e2">msg_hdr_t</a> type. When an antimessage must be sent out, this is done by copying the message header into a <a class="el" href="core_8h.html#abb831098e1334cd59d2c5e374416680e">msg_t</a> type. This is required because all message sending logic assumes that a <a class="el" href="core_8h.html#abb831098e1334cd59d2c5e374416680e">msg_t</a> data structure is being passed (this avoid having to perform multiple checks or multiple casts in the code base).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hdr</td><td>A pointer to the message header from which the message information is taken. </td></tr>
    <tr><td class="paramname">msg</td><td>A pointer to the message where the header information is copied. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="communication_8c_source.html#l00568">568</a> of file <a class="el" href="communication_8c_source.html">communication.c</a>.</p>

<p><div id="dynsection-10" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><img src="communication_8h_a5bbdfc874efd40b9126ce2202fb19534_icgraph.png" border="0" usemap="#communication_8h_a5bbdfc874efd40b9126ce2202fb19534_icgraph" alt=""/></div>
<map name="communication_8h_a5bbdfc874efd40b9126ce2202fb19534_icgraph" id="communication_8h_a5bbdfc874efd40b9126ce2202fb19534_icgraph">
<area shape="rect" id="node2" href="communication_8h.html#aa8047651e174f4d26bef644233b5c8f8" title="Send all antimessages for a certain LP. " alt="" coords="152,143,303,170"/>
<area shape="rect" id="node3" href="state_8h.html#a1fd6b7926db41257e07600226d87fffa" title="rollback" alt="" coords="351,143,421,170"/>
<area shape="rect" id="node4" href="scheduler_8h.html#ac48128e72b303ea22d8ec641a9516b15" title="schedule" alt="" coords="469,143,548,170"/>
<area shape="rect" id="node5" href="gvt_2gvt_8h.html#a234e866bb1e37fa25dec9bb40134234d" title="get_last_gvt" alt="" coords="596,118,696,145"/>
<area shape="rect" id="node7" href="main_8c.html#aa729cb27350c33119484501e13df4fec" title="main_simulation_loop" alt="" coords="1333,71,1495,98"/>
<area shape="rect" id="node6" href="main_8c.html#af2ac8c142556588d87e6c069a4ca9894" title="end_computing" alt="" coords="1147,67,1268,94"/>
<area shape="rect" id="node9" href="queues_8h.html#a54eca9bfa893cac072d1b1d3010c2944" title="process_bottom_halves" alt="" coords="744,118,919,145"/>
<area shape="rect" id="node10" href="statistics_8c.html#ab7b584959699657a63a49384f07fd7a9" title="format_size" alt="" coords="783,17,880,43"/>
<area shape="rect" id="node8" href="main_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="1808,42,1863,69"/>
<area shape="rect" id="node11" href="statistics_8h.html#aeff52bbf045362270639b2baed20762b" title="statistics_stop" alt="" coords="967,17,1081,43"/>
<area shape="rect" id="node12" href="core_8h.html#a8f346536ccfbe77b78ed577674beb6cf" title="simulation_shutdown" alt="" coords="1129,17,1285,43"/>
<area shape="rect" id="node13" href="core_8c.html#a9b05d2af2e233e2616633eaa706682ee" title="exit_from_simulation\l_model" alt="" coords="1337,5,1491,47"/>
<area shape="rect" id="node14" href="core_8h.html#a7fb819521b1ab5fc7644ad216fe7b465" title="base_init" alt="" coords="1543,14,1621,41"/>
<area shape="rect" id="node15" href="init_8h.html#a417eb072179d09f441dbae3125049e46" title="SystemInit" alt="" coords="1669,15,1760,42"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae80f5356cc32f9f2373305341e409b3b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void insert_outgoing_msg </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="core_8h.html#abb831098e1334cd59d2c5e374416680e">msg_t</a> *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Place a message in the temporary LP outgoing buffer. </p>
<p>To quickly finish the execution of events, once a simulation model calls <a class="el" href="communication_8c.html#a1bf991ec14bcab7b310ffa40cd651da3" title="This is the function pointer to correctly set ScheduleNewEvent API version, depending if we&#39;re runnin...">ScheduleNewEvent()</a>, the event is not actually immediately sent. On the other hand, the message is packed and placed in a temporary output queue. Once the event's execution is completed, this queue is scanned to send out all the generated events.</p>
<p>This function places a newly-scheduled event into this temporary queue, which is implemented as a resizable array of pointers to message buffers.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>The packed message to insert in the temporary outgoing queue. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="communication_8c_source.html#l00396">396</a> of file <a class="el" href="communication_8c_source.html">communication.c</a>.</p>

<p><div id="dynsection-11" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-11-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-11-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-11-content" class="dyncontent" style="display:none;">
<div class="center"><img src="communication_8h_ae80f5356cc32f9f2373305341e409b3b_icgraph.png" border="0" usemap="#communication_8h_ae80f5356cc32f9f2373305341e409b3b_icgraph" alt=""/></div>
<map name="communication_8h_ae80f5356cc32f9f2373305341e409b3b_icgraph" id="communication_8h_ae80f5356cc32f9f2373305341e409b3b_icgraph">
<area shape="rect" id="node2" href="communication_8h.html#ae0329023aeab7047bcb7b4708698a008" title="Schedule a new message to some LP. " alt="" coords="209,5,399,32"/>
<area shape="rect" id="node3" href="init_8h.html#a417eb072179d09f441dbae3125049e46" title="SystemInit" alt="" coords="447,5,537,32"/>
<area shape="rect" id="node4" href="main_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="585,5,640,32"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a762b3dacaa82c4590e0572ac08117153"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void msg_hdr_release </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="core_8h.html#ab4ec065a56677fd6e8eb5d360aad06e2">msg_hdr_t</a> *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Release a message header. </p>
<p>Message headers are taken always from the sender LP, as they are the compact representation of an antimessage. Therefore, the release function does not check whether the LP is local or not, but it frees memory directly from the sender slab allocator.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>A pointer to the message header to release </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="communication_8c_source.html#l00130">130</a> of file <a class="el" href="communication_8c_source.html">communication.c</a>.</p>

<p><div id="dynsection-12" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-12-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-12-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-12-content" class="dyncontent" style="display:none;">
<div class="center"><img src="communication_8h_a762b3dacaa82c4590e0572ac08117153_icgraph.png" border="0" usemap="#communication_8h_a762b3dacaa82c4590e0572ac08117153_icgraph" alt=""/></div>
<map name="communication_8h_a762b3dacaa82c4590e0572ac08117153_icgraph" id="communication_8h_a762b3dacaa82c4590e0572ac08117153_icgraph">
<area shape="rect" id="node2" href="communication_8h.html#aa8047651e174f4d26bef644233b5c8f8" title="Send all antimessages for a certain LP. " alt="" coords="185,157,336,184"/>
<area shape="rect" id="node16" href="fossil_8c.html#af4d5d546129fe91cedfc16ddedf76464" title="fossil_collection" alt="" coords="384,208,505,235"/>
<area shape="rect" id="node3" href="state_8h.html#a1fd6b7926db41257e07600226d87fffa" title="rollback" alt="" coords="409,157,480,184"/>
<area shape="rect" id="node4" href="scheduler_8h.html#ac48128e72b303ea22d8ec641a9516b15" title="schedule" alt="" coords="573,157,652,184"/>
<area shape="rect" id="node5" href="gvt_2gvt_8h.html#a234e866bb1e37fa25dec9bb40134234d" title="get_last_gvt" alt="" coords="729,56,829,83"/>
<area shape="rect" id="node7" href="main_8c.html#aa729cb27350c33119484501e13df4fec" title="main_simulation_loop" alt="" coords="1475,107,1636,133"/>
<area shape="rect" id="node6" href="main_8c.html#af2ac8c142556588d87e6c069a4ca9894" title="end_computing" alt="" coords="1288,107,1409,133"/>
<area shape="rect" id="node9" href="queues_8h.html#a54eca9bfa893cac072d1b1d3010c2944" title="process_bottom_halves" alt="" coords="885,56,1060,83"/>
<area shape="rect" id="node10" href="statistics_8c.html#ab7b584959699657a63a49384f07fd7a9" title="format_size" alt="" coords="924,5,1021,32"/>
<area shape="rect" id="node8" href="main_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="1949,65,2004,92"/>
<area shape="rect" id="node11" href="statistics_8h.html#aeff52bbf045362270639b2baed20762b" title="statistics_stop" alt="" coords="1108,5,1223,32"/>
<area shape="rect" id="node12" href="core_8h.html#a8f346536ccfbe77b78ed577674beb6cf" title="simulation_shutdown" alt="" coords="1271,5,1427,32"/>
<area shape="rect" id="node13" href="core_8c.html#a9b05d2af2e233e2616633eaa706682ee" title="exit_from_simulation\l_model" alt="" coords="1478,19,1633,61"/>
<area shape="rect" id="node14" href="core_8h.html#a7fb819521b1ab5fc7644ad216fe7b465" title="base_init" alt="" coords="1684,31,1763,57"/>
<area shape="rect" id="node15" href="init_8h.html#a417eb072179d09f441dbae3125049e46" title="SystemInit" alt="" coords="1811,37,1901,64"/>
<area shape="rect" id="node17" href="gvt_2gvt_8h.html#a62e7abde0dac08e56aa2a57401aed27b" title="adopt_new_gvt" alt="" coords="553,208,672,235"/>
<area shape="rect" id="node18" href="gvt_2gvt_8h.html#a899b50ab45427cf145360ff3a6c29808" title="gvt_operations" alt="" coords="720,208,837,235"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a323ad017762155352c38983e67e8adeb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void msg_release </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="core_8h.html#abb831098e1334cd59d2c5e374416680e">msg_t</a> *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Release a message buffer. </p>
<p>This function releases a message buffer which is no longer needed (i.e., it was keeping a message annihilated by a corresponding antimessage, or a message which is now beyond the commit horizon identified by the GVT).</p>
<p>To free the message, this function checks againts the total size of the message, considering both the size of the <a class="el" href="core_8h.html#abb831098e1334cd59d2c5e374416680e">msg_t</a> structure and that of the payload kept in the <code>event_content</code> member of <a class="el" href="core_8h.html#abb831098e1334cd59d2c5e374416680e">msg_t</a>. If the total size is smaller than <a class="el" href="communication_8h.html#a14ef486128b10eab3ff55b61b9579bab">SLAB_MSG_SIZE</a>, then the message was taken from a slab, otherwise it has been taken by the buddy system. Therefore, we free the buffer from the corresponding data structure.</p>
<p>Messages are freed using this function both if they are stable and transient in this simulation instance, i.e. if they were destined for a local LP or if they were temporarily allocated here to be transmitted to a remote rank using MPI. Therefore, the function <a class="el" href="communication_8c.html#ae6b96249d35969d688d0d84209919c8f" title="Find a slab to allocate a message buffer. ">which_slab_to_use()</a> is queried to find out the proper slab to use for deallocating the buffer.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>A pointer to the message buffer to release. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="communication_8c_source.html#l00224">224</a> of file <a class="el" href="communication_8c_source.html">communication.c</a>.</p>

<p><div id="dynsection-13" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-13-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-13-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-13-content" class="dyncontent" style="display:none;">
<div class="center"><img src="communication_8h_a323ad017762155352c38983e67e8adeb_cgraph.png" border="0" usemap="#communication_8h_a323ad017762155352c38983e67e8adeb_cgraph" alt=""/></div>
<map name="communication_8h_a323ad017762155352c38983e67e8adeb_cgraph" id="communication_8h_a323ad017762155352c38983e67e8adeb_cgraph">
<area shape="rect" id="node2" href="communication_8c.html#ae6b96249d35969d688d0d84209919c8f" title="Find a slab to allocate a message buffer. " alt="" coords="157,5,297,32"/>
<area shape="rect" id="node3" href="core_8c.html#a6793e4c70d69277f24ff0e494ed8ed10" title="find_kernel_by_gid" alt="" coords="345,5,484,32"/>
</map>
</div>
</p>

<p><div id="dynsection-14" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-14-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-14-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-14-content" class="dyncontent" style="display:none;">
<div class="center"><img src="communication_8h_a323ad017762155352c38983e67e8adeb_icgraph.png" border="0" usemap="#communication_8h_a323ad017762155352c38983e67e8adeb_icgraph" alt=""/></div>
<map name="communication_8h_a323ad017762155352c38983e67e8adeb_icgraph" id="communication_8h_a323ad017762155352c38983e67e8adeb_icgraph">
<area shape="rect" id="node2" href="wnd_8c.html#a9b192f19fc6af0cfd7bcefd788b0b93f" title="Prune an outgoing queue. " alt="" coords="160,107,329,133"/>
<area shape="rect" id="node8" href="fossil_8c.html#af4d5d546129fe91cedfc16ddedf76464" title="fossil_collection" alt="" coords="407,31,529,57"/>
<area shape="rect" id="node11" href="queues_8h.html#a54eca9bfa893cac072d1b1d3010c2944" title="process_bottom_halves" alt="" coords="157,183,332,209"/>
<area shape="rect" id="node3" href="wnd_8h.html#a157ee75a6300b4d0ae3c99afe8c3ae6a" title="Prune all outgoing queues. " alt="" coords="380,107,556,133"/>
<area shape="rect" id="node4" href="wnd_8h.html#acbe46c456aa03b014ca2134604700789" title="Finalize the message delivery subsystem. " alt="" coords="604,56,785,83"/>
<area shape="rect" id="node5" href="main_8c.html#aa729cb27350c33119484501e13df4fec" title="main_simulation_loop" alt="" coords="1203,157,1364,184"/>
<area shape="rect" id="node6" href="main_8c.html#af2ac8c142556588d87e6c069a4ca9894" title="end_computing" alt="" coords="1412,208,1533,235"/>
<area shape="rect" id="node7" href="main_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="1720,196,1775,223"/>
<area shape="rect" id="node9" href="gvt_2gvt_8h.html#a62e7abde0dac08e56aa2a57401aed27b" title="adopt_new_gvt" alt="" coords="635,5,754,32"/>
<area shape="rect" id="node10" href="gvt_2gvt_8h.html#a899b50ab45427cf145360ff3a6c29808" title="gvt_operations" alt="" coords="833,19,951,45"/>
<area shape="rect" id="node12" href="gvt_2gvt_8h.html#a234e866bb1e37fa25dec9bb40134234d" title="get_last_gvt" alt="" coords="418,208,518,235"/>
<area shape="rect" id="node13" href="statistics_8c.html#ab7b584959699657a63a49384f07fd7a9" title="format_size" alt="" coords="646,259,743,285"/>
<area shape="rect" id="node14" href="statistics_8h.html#aeff52bbf045362270639b2baed20762b" title="statistics_stop" alt="" coords="835,259,949,285"/>
<area shape="rect" id="node15" href="core_8h.html#a8f346536ccfbe77b78ed577674beb6cf" title="simulation_shutdown" alt="" coords="999,259,1155,285"/>
<area shape="rect" id="node16" href="core_8c.html#a9b05d2af2e233e2616633eaa706682ee" title="exit_from_simulation\l_model" alt="" coords="1206,259,1361,301"/>
<area shape="rect" id="node17" href="core_8h.html#a7fb819521b1ab5fc7644ad216fe7b465" title="base_init" alt="" coords="1433,263,1512,289"/>
<area shape="rect" id="node18" href="init_8h.html#a417eb072179d09f441dbae3125049e46" title="SystemInit" alt="" coords="1581,235,1672,261"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a91ccc25aa3eaa49ec96ea9328aa99dbd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void msg_to_hdr </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="core_8h.html#ab4ec065a56677fd6e8eb5d360aad06e2">msg_hdr_t</a> *&#160;</td>
          <td class="paramname"><em>hdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="core_8h.html#abb831098e1334cd59d2c5e374416680e">msg_t</a> *&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert a message to a message header. </p>
<p>This function takes an already packed message pointed by <code>msg</code> and populates the relevant fields of the message header pointed by <code>hdr</code> to create a compact representation of the message being sent out. This is necessary to later send antimessages, upon a rollback operation.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hdr</td><td>A pointer to a <a class="el" href="core_8h.html#ab4ec065a56677fd6e8eb5d360aad06e2">msg_hdr_t</a> where to store the relevant information to represent an antimessage. </td></tr>
    <tr><td class="paramname">msg</td><td>A pointer to an already-packed message from which to take the relevant information to populate the header </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="communication_8c_source.html#l00532">532</a> of file <a class="el" href="communication_8c_source.html">communication.c</a>.</p>

<p><div id="dynsection-15" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-15-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-15-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-15-content" class="dyncontent" style="display:none;">
<div class="center"><img src="communication_8h_a91ccc25aa3eaa49ec96ea9328aa99dbd_cgraph.png" border="0" usemap="#communication_8h_a91ccc25aa3eaa49ec96ea9328aa99dbd_cgraph" alt=""/></div>
<map name="communication_8h_a91ccc25aa3eaa49ec96ea9328aa99dbd_cgraph" id="communication_8h_a91ccc25aa3eaa49ec96ea9328aa99dbd_cgraph">
<area shape="rect" id="node2" href="communication_8c.html#aebec05b86f3467473116d555954b80f4" title="Perform some sanity checks on a message buffer. " alt="" coords="152,5,259,32"/>
<area shape="rect" id="node3" href="communication_8c.html#ab442ee81854e910ac0b21e3caf21cc48" title="Tell the GID of the sender of a message, given its mark. " alt="" coords="307,5,408,32"/>
</map>
</div>
</p>

<p><div id="dynsection-16" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-16-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-16-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-16-content" class="dyncontent" style="display:none;">
<div class="center"><img src="communication_8h_a91ccc25aa3eaa49ec96ea9328aa99dbd_icgraph.png" border="0" usemap="#communication_8h_a91ccc25aa3eaa49ec96ea9328aa99dbd_icgraph" alt=""/></div>
<map name="communication_8h_a91ccc25aa3eaa49ec96ea9328aa99dbd_icgraph" id="communication_8h_a91ccc25aa3eaa49ec96ea9328aa99dbd_icgraph">
<area shape="rect" id="node2" href="communication_8h.html#ad154a0e0c0815b786ead70143505abd6" title="Send all pending outgoing messages. " alt="" coords="152,143,311,170"/>
<area shape="rect" id="node3" href="scheduler_8h.html#ac48128e72b303ea22d8ec641a9516b15" title="schedule" alt="" coords="359,143,437,170"/>
<area shape="rect" id="node4" href="gvt_2gvt_8h.html#a234e866bb1e37fa25dec9bb40134234d" title="get_last_gvt" alt="" coords="485,118,585,145"/>
<area shape="rect" id="node6" href="main_8c.html#aa729cb27350c33119484501e13df4fec" title="main_simulation_loop" alt="" coords="1223,71,1384,98"/>
<area shape="rect" id="node5" href="main_8c.html#af2ac8c142556588d87e6c069a4ca9894" title="end_computing" alt="" coords="1036,67,1157,94"/>
<area shape="rect" id="node8" href="queues_8h.html#a54eca9bfa893cac072d1b1d3010c2944" title="process_bottom_halves" alt="" coords="633,118,808,145"/>
<area shape="rect" id="node9" href="statistics_8c.html#ab7b584959699657a63a49384f07fd7a9" title="format_size" alt="" coords="672,17,769,43"/>
<area shape="rect" id="node7" href="main_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="1697,42,1752,69"/>
<area shape="rect" id="node10" href="statistics_8h.html#aeff52bbf045362270639b2baed20762b" title="statistics_stop" alt="" coords="856,17,971,43"/>
<area shape="rect" id="node11" href="core_8h.html#a8f346536ccfbe77b78ed577674beb6cf" title="simulation_shutdown" alt="" coords="1019,17,1175,43"/>
<area shape="rect" id="node12" href="core_8c.html#a9b05d2af2e233e2616633eaa706682ee" title="exit_from_simulation\l_model" alt="" coords="1226,5,1381,47"/>
<area shape="rect" id="node13" href="core_8h.html#a7fb819521b1ab5fc7644ad216fe7b465" title="base_init" alt="" coords="1432,14,1511,41"/>
<area shape="rect" id="node14" href="init_8h.html#a417eb072179d09f441dbae3125049e46" title="SystemInit" alt="" coords="1559,15,1649,42"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a56a4865196c169691525e99bae337519"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pack_msg </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="core_8h.html#abb831098e1334cd59d2c5e374416680e">msg_t</a> **&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="core_8h.html#a74ea65c5dea49dba0b0c4b3bb8ee47f1">GID_t</a>&#160;</td>
          <td class="paramname"><em>sender</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="core_8h.html#a74ea65c5dea49dba0b0c4b3bb8ee47f1">GID_t</a>&#160;</td>
          <td class="paramname"><em>receiver</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ROOT-Sim_8h.html#a8f79ad6880e99acb4edd079069847d9d">simtime_t</a>&#160;</td>
          <td class="paramname"><em>timestamp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ROOT-Sim_8h.html#a8f79ad6880e99acb4edd079069847d9d">simtime_t</a>&#160;</td>
          <td class="paramname"><em>send_time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>payload</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Pack a message in a platform-level data structure. </p>
<p>This function takes all the parameters which represent a model-level event and pack it in a simulation-level datastructure representing a message (namely, a <a class="el" href="core_8h.html#abb831098e1334cd59d2c5e374416680e">msg_t</a> type).</p>
<p>This function also allocates the buffer for that message. To this end, it determines whether the buffer can be taken from some slab allocator or not (depending on the size of the payload, which determines whether the final message fits into a buffer of size <a class="el" href="communication_8h.html#a14ef486128b10eab3ff55b61b9579bab">SLAB_MSG_SIZE</a>).</p>
<p>This is a uniform internal API which can be used in any situation. Indeed, it relies on the <a class="el" href="communication_8c.html#ae6b96249d35969d688d0d84209919c8f" title="Find a slab to allocate a message buffer. ">which_slab_to_use()</a> internal function to find out whether this message will be kept in the local instance of a distributed simulation or not.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>A double pointer to a <a class="el" href="core_8h.html#abb831098e1334cd59d2c5e374416680e">msg_t</a> type. Since this function allocates the buffer, a pointer to a <code>msg_t</code> <code>*</code> datatype should be passed, in order for the caller to receive the pointer to the message. </td></tr>
    <tr><td class="paramname">sender</td><td>The GID of the sender </td></tr>
    <tr><td class="paramname">receiver</td><td>The GID of the receiver </td></tr>
    <tr><td class="paramname">type</td><td>A numerical code identifying the event type. This can be a model-specific type, or a platform-level code used to identify a control message. </td></tr>
    <tr><td class="paramname">timestamp</td><td>This is the simulation time at which the destination LP will have to execute this event. </td></tr>
    <tr><td class="paramname">send_time</td><td>This event has been sent by <code>sender</code> at this particular simulation time. This information is used to handle antimessages upon a rollback operation. </td></tr>
    <tr><td class="paramname">size</td><td>The size of the model-specific payload. </td></tr>
    <tr><td class="paramname">payload</td><td>A pointer to the model-specific payload. It can be a pointer to whatever, e.g. the stack of a ULT in which the LP is running, or a data structure in the simulation state of the LP. This is not a problem because we make a full copy of the event payload. Problems might arise if a pointer is present in the payload, and the ECS subsystem is not running, but at that point it is the simulation model's responsibility to make the simulation inconsistent or to crash the run. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="communication_8c_source.html#l00494">494</a> of file <a class="el" href="communication_8c_source.html">communication.c</a>.</p>

<p><div id="dynsection-17" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-17-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-17-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-17-content" class="dyncontent" style="display:none;">
<div class="center"><img src="communication_8h_a56a4865196c169691525e99bae337519_cgraph.png" border="0" usemap="#communication_8h_a56a4865196c169691525e99bae337519_cgraph" alt=""/></div>
<map name="communication_8h_a56a4865196c169691525e99bae337519_cgraph" id="communication_8h_a56a4865196c169691525e99bae337519_cgraph">
<area shape="rect" id="node2" href="communication_8c.html#ab957dc2cd186382c50ef8cfde9761909" title="Get a buffer to keep a message. " alt="" coords="140,5,288,32"/>
<area shape="rect" id="node3" href="communication_8c.html#ae6b96249d35969d688d0d84209919c8f" title="Find a slab to allocate a message buffer. " alt="" coords="144,56,284,83"/>
<area shape="rect" id="node4" href="core_8c.html#a6793e4c70d69277f24ff0e494ed8ed10" title="find_kernel_by_gid" alt="" coords="336,56,475,83"/>
</map>
</div>
</p>

<p><div id="dynsection-18" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-18-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-18-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-18-content" class="dyncontent" style="display:none;">
<div class="center"><img src="communication_8h_a56a4865196c169691525e99bae337519_icgraph.png" border="0" usemap="#communication_8h_a56a4865196c169691525e99bae337519_icgraph" alt=""/></div>
<map name="communication_8h_a56a4865196c169691525e99bae337519_icgraph" id="communication_8h_a56a4865196c169691525e99bae337519_icgraph">
<area shape="rect" id="node2" href="communication_8h.html#ae0329023aeab7047bcb7b4708698a008" title="Schedule a new message to some LP. " alt="" coords="140,5,329,32"/>
<area shape="rect" id="node5" href="scheduler_8h.html#a1b1b085c6b05a9d202a1629dcd71cffe" title="LP_main_loop" alt="" coords="179,56,290,83"/>
<area shape="rect" id="node3" href="init_8h.html#a417eb072179d09f441dbae3125049e46" title="SystemInit" alt="" coords="377,5,468,32"/>
<area shape="rect" id="node4" href="main_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="516,5,571,32"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae0329023aeab7047bcb7b4708698a008"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ParallelScheduleNewEvent </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>gid_receiver</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ROOT-Sim_8h.html#a8f79ad6880e99acb4edd079069847d9d">simtime_t</a>&#160;</td>
          <td class="paramname"><em>timestamp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>event_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>event_content</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>event_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Schedule a new message to some LP. </p>
<p>This is one of the entry points from the application model, used in parallel/distributed simulations. The simulation model calls <a class="el" href="communication_8c.html#a1bf991ec14bcab7b310ffa40cd651da3" title="This is the function pointer to correctly set ScheduleNewEvent API version, depending if we&#39;re runnin...">ScheduleNewEvent()</a> which is a function pointer, set to point to this implementation if the <code>&ndash;sequential</code> flag is not passed as an option.</p>
<p>This function performs all the required sanity checks:</p><ul>
<li>Is the destination LP id valid?</li>
<li>Are we sending an event to the past?</li>
<li>Is the event type in a valid range?</li>
</ul>
<p>If all the checks pass, then the event content is copied in a platform-level buffer and a pointer to it is placed in the temporary LP outgoing buffer, for later delivery (possibly via MPI).</p>
<p>If the LP is running in silent execution, this function simply returns as the event has already been sent during a previous event execution.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">gid_receiver</td><td>Global id of logical process at which the message must be delivered </td></tr>
    <tr><td class="paramname">timestamp</td><td>Logical Virtual Time associated with the event enveloped into the message </td></tr>
    <tr><td class="paramname">event_type</td><td>Type of the event </td></tr>
    <tr><td class="paramname">event_content</td><td>Payload of the event </td></tr>
    <tr><td class="paramname">event_size</td><td>Size of event's payload </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="communication_8c_source.html#l00263">263</a> of file <a class="el" href="communication_8c_source.html">communication.c</a>.</p>

<p><div id="dynsection-19" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-19-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-19-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-19-content" class="dyncontent" style="display:none;">
<div class="center"><img src="communication_8h_ae0329023aeab7047bcb7b4708698a008_cgraph.png" border="0" usemap="#communication_8h_ae0329023aeab7047bcb7b4708698a008_cgraph" alt=""/></div>
<map name="communication_8h_ae0329023aeab7047bcb7b4708698a008_cgraph" id="communication_8h_ae0329023aeab7047bcb7b4708698a008_cgraph">
<area shape="rect" id="node2" href="communication_8c.html#a56a4865196c169691525e99bae337519" title="Pack a message in a platform&#45;level data structure. " alt="" coords="277,31,364,57"/>
<area shape="rect" id="node6" href="queues_8c.html#aee531712d642cd5d4a54e613aa2c70f9" title="generate_mark" alt="" coords="261,81,381,108"/>
<area shape="rect" id="node7" href="communication_8c.html#ae80f5356cc32f9f2373305341e409b3b" title="Place a message in the temporary LP outgoing buffer. " alt="" coords="243,132,399,159"/>
<area shape="rect" id="node3" href="communication_8c.html#ab957dc2cd186382c50ef8cfde9761909" title="Get a buffer to keep a message. " alt="" coords="447,5,595,32"/>
<area shape="rect" id="node4" href="communication_8c.html#ae6b96249d35969d688d0d84209919c8f" title="Find a slab to allocate a message buffer. " alt="" coords="451,56,591,83"/>
<area shape="rect" id="node5" href="core_8c.html#a6793e4c70d69277f24ff0e494ed8ed10" title="find_kernel_by_gid" alt="" coords="643,56,781,83"/>
</map>
</div>
</p>

<p><div id="dynsection-20" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-20-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-20-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-20-content" class="dyncontent" style="display:none;">
<div class="center"><img src="communication_8h_ae0329023aeab7047bcb7b4708698a008_icgraph.png" border="0" usemap="#communication_8h_ae0329023aeab7047bcb7b4708698a008_icgraph" alt=""/></div>
<map name="communication_8h_ae0329023aeab7047bcb7b4708698a008_icgraph" id="communication_8h_ae0329023aeab7047bcb7b4708698a008_icgraph">
<area shape="rect" id="node2" href="init_8h.html#a417eb072179d09f441dbae3125049e46" title="SystemInit" alt="" coords="243,5,333,32"/>
<area shape="rect" id="node3" href="main_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="381,5,436,32"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ab5250867c0edfc326732c059b0c0c3b5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Send </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="core_8h.html#abb831098e1334cd59d2c5e374416680e">msg_t</a> *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a message. </p>
<p>This function sends a message. This is the decision point where a message receiver is checked to understand whether it must be sent using MPI, or if it is heading towards a local LP and therefore it can be placed in the bottom half buffer.</p>
<p>This function is therefore a uniform internal API function to implement message passing in a parallel/distributed simulation environment.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>A pointer to the message to send </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="communication_8c_source.html#l00367">367</a> of file <a class="el" href="communication_8c_source.html">communication.c</a>.</p>

<p><div id="dynsection-21" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-21-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-21-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-21-content" class="dyncontent" style="display:none;">
<div class="center"><img src="communication_8h_ab5250867c0edfc326732c059b0c0c3b5_cgraph.png" border="0" usemap="#communication_8h_ab5250867c0edfc326732c059b0c0c3b5_cgraph" alt=""/></div>
<map name="communication_8h_ab5250867c0edfc326732c059b0c0c3b5_cgraph" id="communication_8h_ab5250867c0edfc326732c059b0c0c3b5_cgraph">
<area shape="rect" id="node2" href="communication_8c.html#aebec05b86f3467473116d555954b80f4" title="Perform some sanity checks on a message buffer. " alt="" coords="331,8,437,35"/>
<area shape="rect" id="node4" href="core_8c.html#a6793e4c70d69277f24ff0e494ed8ed10" title="find_kernel_by_gid" alt="" coords="517,135,656,162"/>
<area shape="rect" id="node5" href="mpi_8c.html#a41390aa810e506d633d2cf01bc5973bb" title="Send a message to a remote LP. " alt="" coords="108,186,251,212"/>
<area shape="rect" id="node12" href="queues_8c.html#a9ff164dd6a938afa7e892f4028c2a033" title="insert_bottom_half" alt="" coords="108,34,251,60"/>
<area shape="rect" id="node3" href="communication_8c.html#ab442ee81854e910ac0b21e3caf21cc48" title="Tell the GID of the sender of a message, given its mark. " alt="" coords="536,8,637,35"/>
<area shape="rect" id="node6" href="wnd_8c.html#a76d33aed8e7dfe9ab6d8ce4f9b1f4fd8" title="Allocate a buffer for an outgoing message node. " alt="" coords="299,186,469,212"/>
<area shape="rect" id="node7" href="communication_2gvt_8c.html#a76f513e8aeeeb0abebc46f19ceb72293" title="Register an outgoing message, if necessary. " alt="" coords="299,236,469,263"/>
<area shape="rect" id="node9" href="wnd_8c.html#a16850c4710b9b54fc67b88547b3b87ee" title="Store an outgoing message. " alt="" coords="307,287,461,314"/>
<area shape="rect" id="node8" href="atomic_8h.html#ae2153aa1dc0d0362246d6e14f60b5550" title="atomic_inc" alt="" coords="541,236,632,263"/>
<area shape="rect" id="node10" href="atomic_8h.html#a7a6b9868956dd8e51e5de80e16c76fc4" title="spin_lock" alt="" coords="547,287,627,314"/>
<area shape="rect" id="node11" href="atomic_8h.html#a4e8c9d1c6101995f1ecd2141d77e4824" title="spin_unlock" alt="" coords="539,338,635,364"/>
</map>
</div>
</p>

<p><div id="dynsection-22" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-22-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-22-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-22-content" class="dyncontent" style="display:none;">
<div class="center"><img src="communication_8h_ab5250867c0edfc326732c059b0c0c3b5_icgraph.png" border="0" usemap="#communication_8h_ab5250867c0edfc326732c059b0c0c3b5_icgraph" alt=""/></div>
<map name="communication_8h_ab5250867c0edfc326732c059b0c0c3b5_icgraph" id="communication_8h_ab5250867c0edfc326732c059b0c0c3b5_icgraph">
<area shape="rect" id="node2" href="communication_8h.html#aa8047651e174f4d26bef644233b5c8f8" title="Send all antimessages for a certain LP. " alt="" coords="108,118,259,145"/>
<area shape="rect" id="node16" href="communication_8h.html#ad154a0e0c0815b786ead70143505abd6" title="Send all pending outgoing messages. " alt="" coords="307,169,465,195"/>
<area shape="rect" id="node3" href="state_8h.html#a1fd6b7926db41257e07600226d87fffa" title="rollback" alt="" coords="351,118,421,145"/>
<area shape="rect" id="node4" href="scheduler_8h.html#ac48128e72b303ea22d8ec641a9516b15" title="schedule" alt="" coords="513,143,592,170"/>
<area shape="rect" id="node5" href="gvt_2gvt_8h.html#a234e866bb1e37fa25dec9bb40134234d" title="get_last_gvt" alt="" coords="640,118,740,145"/>
<area shape="rect" id="node7" href="main_8c.html#aa729cb27350c33119484501e13df4fec" title="main_simulation_loop" alt="" coords="1377,71,1539,98"/>
<area shape="rect" id="node6" href="main_8c.html#af2ac8c142556588d87e6c069a4ca9894" title="end_computing" alt="" coords="1191,67,1312,94"/>
<area shape="rect" id="node9" href="queues_8h.html#a54eca9bfa893cac072d1b1d3010c2944" title="process_bottom_halves" alt="" coords="788,118,963,145"/>
<area shape="rect" id="node10" href="statistics_8c.html#ab7b584959699657a63a49384f07fd7a9" title="format_size" alt="" coords="827,17,924,43"/>
<area shape="rect" id="node8" href="main_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="1852,42,1907,69"/>
<area shape="rect" id="node11" href="statistics_8h.html#aeff52bbf045362270639b2baed20762b" title="statistics_stop" alt="" coords="1011,17,1125,43"/>
<area shape="rect" id="node12" href="core_8h.html#a8f346536ccfbe77b78ed577674beb6cf" title="simulation_shutdown" alt="" coords="1173,17,1329,43"/>
<area shape="rect" id="node13" href="core_8c.html#a9b05d2af2e233e2616633eaa706682ee" title="exit_from_simulation\l_model" alt="" coords="1381,5,1535,47"/>
<area shape="rect" id="node14" href="core_8h.html#a7fb819521b1ab5fc7644ad216fe7b465" title="base_init" alt="" coords="1587,14,1665,41"/>
<area shape="rect" id="node15" href="init_8h.html#a417eb072179d09f441dbae3125049e46" title="SystemInit" alt="" coords="1713,15,1804,42"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa8047651e174f4d26bef644233b5c8f8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void send_antimessages </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlp__struct.html">lp_struct</a> *&#160;</td>
          <td class="paramname"><em>lp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ROOT-Sim_8h.html#a8f79ad6880e99acb4edd079069847d9d">simtime_t</a>&#160;</td>
          <td class="paramname"><em>after_simtime</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send all antimessages for a certain LP. </p>
<p>This function send all the antimessages for a certain LP, provided a simulation time (which is associated with the time at which we are rolling back.</p>
<p>After that the antimessage is sent, the header is immediately removed from the output queue, as MPI guarantees that the antimessage is eventually received at the destination.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">lp</td><td>A pointer to the LP <a class="el" href="structlp__struct.html">lp_struct</a> for which antimessages should be sent </td></tr>
    <tr><td class="paramname">after_simtime</td><td>The simulation time instant after which to send antimessages </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="communication_8c_source.html#l00327">327</a> of file <a class="el" href="communication_8c_source.html">communication.c</a>.</p>

<p><div id="dynsection-23" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-23-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-23-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-23-content" class="dyncontent" style="display:none;">
<div class="center"><img src="communication_8h_aa8047651e174f4d26bef644233b5c8f8_cgraph.png" border="0" usemap="#communication_8h_aa8047651e174f4d26bef644233b5c8f8_cgraph" alt=""/></div>
<map name="communication_8h_aa8047651e174f4d26bef644233b5c8f8_cgraph" id="communication_8h_aa8047651e174f4d26bef644233b5c8f8_cgraph">
<area shape="rect" id="node2" href="communication_8c.html#ab957dc2cd186382c50ef8cfde9761909" title="Get a buffer to keep a message. " alt="" coords="204,31,352,57"/>
<area shape="rect" id="node3" href="communication_8c.html#ae6b96249d35969d688d0d84209919c8f" title="Find a slab to allocate a message buffer. " alt="" coords="401,5,541,32"/>
<area shape="rect" id="node5" href="communication_8c.html#a5bbdfc874efd40b9126ce2202fb19534" title="convert a message header into a message " alt="" coords="229,132,327,159"/>
<area shape="rect" id="node6" href="communication_8c.html#ab5250867c0edfc326732c059b0c0c3b5" title="Send a message. " alt="" coords="251,183,305,209"/>
<area shape="rect" id="node17" href="communication_8c.html#a762b3dacaa82c4590e0572ac08117153" title="Release a message header. " alt="" coords="212,233,344,260"/>
<area shape="rect" id="node4" href="core_8c.html#a6793e4c70d69277f24ff0e494ed8ed10" title="find_kernel_by_gid" alt="" coords="809,81,948,108"/>
<area shape="rect" id="node7" href="communication_8c.html#aebec05b86f3467473116d555954b80f4" title="Perform some sanity checks on a message buffer. " alt="" coords="623,309,729,336"/>
<area shape="rect" id="node9" href="mpi_8c.html#a41390aa810e506d633d2cf01bc5973bb" title="Send a message to a remote LP. " alt="" coords="400,183,543,209"/>
<area shape="rect" id="node16" href="queues_8c.html#a9ff164dd6a938afa7e892f4028c2a033" title="insert_bottom_half" alt="" coords="400,284,543,311"/>
<area shape="rect" id="node8" href="communication_8c.html#ab442ee81854e910ac0b21e3caf21cc48" title="Tell the GID of the sender of a message, given its mark. " alt="" coords="828,309,929,336"/>
<area shape="rect" id="node10" href="wnd_8c.html#a76d33aed8e7dfe9ab6d8ce4f9b1f4fd8" title="Allocate a buffer for an outgoing message node. " alt="" coords="591,208,761,235"/>
<area shape="rect" id="node11" href="communication_2gvt_8c.html#a76f513e8aeeeb0abebc46f19ceb72293" title="Register an outgoing message, if necessary. " alt="" coords="591,157,761,184"/>
<area shape="rect" id="node13" href="wnd_8c.html#a16850c4710b9b54fc67b88547b3b87ee" title="Store an outgoing message. " alt="" coords="599,259,753,285"/>
<area shape="rect" id="node12" href="atomic_8h.html#ae2153aa1dc0d0362246d6e14f60b5550" title="atomic_inc" alt="" coords="833,157,924,184"/>
<area shape="rect" id="node14" href="atomic_8h.html#a7a6b9868956dd8e51e5de80e16c76fc4" title="spin_lock" alt="" coords="839,208,919,235"/>
<area shape="rect" id="node15" href="atomic_8h.html#a4e8c9d1c6101995f1ecd2141d77e4824" title="spin_unlock" alt="" coords="831,259,927,285"/>
</map>
</div>
</p>

<p><div id="dynsection-24" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-24-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-24-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-24-content" class="dyncontent" style="display:none;">
<div class="center"><img src="communication_8h_aa8047651e174f4d26bef644233b5c8f8_icgraph.png" border="0" usemap="#communication_8h_aa8047651e174f4d26bef644233b5c8f8_icgraph" alt=""/></div>
<map name="communication_8h_aa8047651e174f4d26bef644233b5c8f8_icgraph" id="communication_8h_aa8047651e174f4d26bef644233b5c8f8_icgraph">
<area shape="rect" id="node2" href="state_8h.html#a1fd6b7926db41257e07600226d87fffa" title="rollback" alt="" coords="204,143,275,170"/>
<area shape="rect" id="node3" href="scheduler_8h.html#ac48128e72b303ea22d8ec641a9516b15" title="schedule" alt="" coords="323,143,401,170"/>
<area shape="rect" id="node4" href="gvt_2gvt_8h.html#a234e866bb1e37fa25dec9bb40134234d" title="get_last_gvt" alt="" coords="449,118,549,145"/>
<area shape="rect" id="node6" href="main_8c.html#aa729cb27350c33119484501e13df4fec" title="main_simulation_loop" alt="" coords="1187,71,1348,98"/>
<area shape="rect" id="node5" href="main_8c.html#af2ac8c142556588d87e6c069a4ca9894" title="end_computing" alt="" coords="1000,67,1121,94"/>
<area shape="rect" id="node8" href="queues_8h.html#a54eca9bfa893cac072d1b1d3010c2944" title="process_bottom_halves" alt="" coords="597,118,772,145"/>
<area shape="rect" id="node9" href="statistics_8c.html#ab7b584959699657a63a49384f07fd7a9" title="format_size" alt="" coords="636,17,733,43"/>
<area shape="rect" id="node7" href="main_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="1661,42,1716,69"/>
<area shape="rect" id="node10" href="statistics_8h.html#aeff52bbf045362270639b2baed20762b" title="statistics_stop" alt="" coords="820,17,935,43"/>
<area shape="rect" id="node11" href="core_8h.html#a8f346536ccfbe77b78ed577674beb6cf" title="simulation_shutdown" alt="" coords="983,17,1139,43"/>
<area shape="rect" id="node12" href="core_8c.html#a9b05d2af2e233e2616633eaa706682ee" title="exit_from_simulation\l_model" alt="" coords="1190,5,1345,47"/>
<area shape="rect" id="node13" href="core_8h.html#a7fb819521b1ab5fc7644ad216fe7b465" title="base_init" alt="" coords="1396,14,1475,41"/>
<area shape="rect" id="node14" href="init_8h.html#a417eb072179d09f441dbae3125049e46" title="SystemInit" alt="" coords="1523,15,1613,42"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad154a0e0c0815b786ead70143505abd6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void send_outgoing_msgs </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlp__struct.html">lp_struct</a> *&#160;</td>
          <td class="paramname"><em>lp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send all pending outgoing messages. </p>
<p>This function sends all messages registered in the outgoing message queue during the execution of an event (see <a class="el" href="communication_8c.html#ae80f5356cc32f9f2373305341e409b3b" title="Place a message in the temporary LP outgoing buffer. ">insert_outgoing_msg()</a>) to the destination LPs. Also, this function records in the output queue of the sender LP that at a certain simulation time a certain message was sent&mdash;this is done using the <a class="el" href="core_8h.html#ab4ec065a56677fd6e8eb5d360aad06e2">msg_hdr_t</a> type. This information is used upon a rollback to send out antimessages.</p>
<p>After the execution of this function, the temporary outgoing queue is considered as empty.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">lp</td><td>A pointer to the LP's <a class="el" href="structlp__struct.html">lp_struct</a> for which we want to finalize the event send operation. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="communication_8c_source.html#l00431">431</a> of file <a class="el" href="communication_8c_source.html">communication.c</a>.</p>

<p><div id="dynsection-25" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-25-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-25-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-25-content" class="dyncontent" style="display:none;">
<div class="center"><img src="communication_8h_ad154a0e0c0815b786ead70143505abd6_cgraph.png" border="0" usemap="#communication_8h_ad154a0e0c0815b786ead70143505abd6_cgraph" alt=""/></div>
<map name="communication_8h_ad154a0e0c0815b786ead70143505abd6_cgraph" id="communication_8h_ad154a0e0c0815b786ead70143505abd6_cgraph">
<area shape="rect" id="node2" href="communication_8c.html#a8c19c92f7666ae90abb179ec12c75023" title="Get a buffer to keep a message header. " alt="" coords="212,5,388,32"/>
<area shape="rect" id="node4" href="communication_8c.html#a91ccc25aa3eaa49ec96ea9328aa99dbd" title="Convert a message to a message header. " alt="" coords="251,56,349,83"/>
<area shape="rect" id="node7" href="communication_8c.html#ab5250867c0edfc326732c059b0c0c3b5" title="Send a message. " alt="" coords="273,157,327,184"/>
<area shape="rect" id="node3" href="communication_8c.html#ab957dc2cd186382c50ef8cfde9761909" title="Get a buffer to keep a message. " alt="" coords="436,5,584,32"/>
<area shape="rect" id="node5" href="communication_8c.html#aebec05b86f3467473116d555954b80f4" title="Perform some sanity checks on a message buffer. " alt="" coords="664,107,771,133"/>
<area shape="rect" id="node6" href="communication_8c.html#ab442ee81854e910ac0b21e3caf21cc48" title="Tell the GID of the sender of a message, given its mark. " alt="" coords="869,107,971,133"/>
<area shape="rect" id="node8" href="core_8c.html#a6793e4c70d69277f24ff0e494ed8ed10" title="find_kernel_by_gid" alt="" coords="851,259,989,285"/>
<area shape="rect" id="node9" href="mpi_8c.html#a41390aa810e506d633d2cf01bc5973bb" title="Send a message to a remote LP. " alt="" coords="439,309,581,336"/>
<area shape="rect" id="node16" href="queues_8c.html#a9ff164dd6a938afa7e892f4028c2a033" title="insert_bottom_half" alt="" coords="439,157,581,184"/>
<area shape="rect" id="node10" href="wnd_8c.html#a76d33aed8e7dfe9ab6d8ce4f9b1f4fd8" title="Allocate a buffer for an outgoing message node. " alt="" coords="632,309,803,336"/>
<area shape="rect" id="node11" href="communication_2gvt_8c.html#a76f513e8aeeeb0abebc46f19ceb72293" title="Register an outgoing message, if necessary. " alt="" coords="633,360,802,387"/>
<area shape="rect" id="node13" href="wnd_8c.html#a16850c4710b9b54fc67b88547b3b87ee" title="Store an outgoing message. " alt="" coords="641,411,794,437"/>
<area shape="rect" id="node12" href="atomic_8h.html#ae2153aa1dc0d0362246d6e14f60b5550" title="atomic_inc" alt="" coords="875,360,965,387"/>
<area shape="rect" id="node14" href="atomic_8h.html#a7a6b9868956dd8e51e5de80e16c76fc4" title="spin_lock" alt="" coords="880,411,960,437"/>
<area shape="rect" id="node15" href="atomic_8h.html#a4e8c9d1c6101995f1ecd2141d77e4824" title="spin_unlock" alt="" coords="872,461,968,488"/>
</map>
</div>
</p>

<p><div id="dynsection-26" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-26-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-26-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-26-content" class="dyncontent" style="display:none;">
<div class="center"><img src="communication_8h_ad154a0e0c0815b786ead70143505abd6_icgraph.png" border="0" usemap="#communication_8h_ad154a0e0c0815b786ead70143505abd6_icgraph" alt=""/></div>
<map name="communication_8h_ad154a0e0c0815b786ead70143505abd6_icgraph" id="communication_8h_ad154a0e0c0815b786ead70143505abd6_icgraph">
<area shape="rect" id="node2" href="scheduler_8h.html#ac48128e72b303ea22d8ec641a9516b15" title="schedule" alt="" coords="212,143,291,170"/>
<area shape="rect" id="node3" href="gvt_2gvt_8h.html#a234e866bb1e37fa25dec9bb40134234d" title="get_last_gvt" alt="" coords="339,118,439,145"/>
<area shape="rect" id="node5" href="main_8c.html#aa729cb27350c33119484501e13df4fec" title="main_simulation_loop" alt="" coords="1076,71,1237,98"/>
<area shape="rect" id="node4" href="main_8c.html#af2ac8c142556588d87e6c069a4ca9894" title="end_computing" alt="" coords="889,67,1011,94"/>
<area shape="rect" id="node7" href="queues_8h.html#a54eca9bfa893cac072d1b1d3010c2944" title="process_bottom_halves" alt="" coords="487,118,661,145"/>
<area shape="rect" id="node8" href="statistics_8c.html#ab7b584959699657a63a49384f07fd7a9" title="format_size" alt="" coords="525,17,623,43"/>
<area shape="rect" id="node6" href="main_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="1551,42,1605,69"/>
<area shape="rect" id="node9" href="statistics_8h.html#aeff52bbf045362270639b2baed20762b" title="statistics_stop" alt="" coords="709,17,824,43"/>
<area shape="rect" id="node10" href="core_8h.html#a8f346536ccfbe77b78ed577674beb6cf" title="simulation_shutdown" alt="" coords="872,17,1028,43"/>
<area shape="rect" id="node11" href="core_8c.html#a9b05d2af2e233e2616633eaa706682ee" title="exit_from_simulation\l_model" alt="" coords="1079,5,1234,47"/>
<area shape="rect" id="node12" href="core_8h.html#a7fb819521b1ab5fc7644ad216fe7b465" title="base_init" alt="" coords="1285,14,1364,41"/>
<area shape="rect" id="node13" href="init_8h.html#a417eb072179d09f441dbae3125049e46" title="SystemInit" alt="" coords="1412,15,1503,42"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aebec05b86f3467473116d555954b80f4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void validate_msg </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="core_8h.html#abb831098e1334cd59d2c5e374416680e">msg_t</a> *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Perform some sanity checks on a message buffer. </p>
<p>This is a debugging function which performs some sanity checks on a message buffer, and aborts the simulation if these checks do not pass.</p>
<p>The checks performed are:</p><ul>
<li>Is the sender LP GID in a valid range?</li>
<li>Is the destination LP GID in a valid range?</li>
<li>Is the message kind of a valid type?</li>
<li>Is the sender associated with the message mark in a valid range?</li>
<li>Is the sender associated with a rendezvous mark in a valid range?</li>
<li>Is the message type in a valid range?</li>
</ul>
<p>If a message is corrupted due to any reason, the likelihood that this function spots the corruption is very high.</p>
<dl class="section warning"><dt>Warning</dt><dd>This function is computationally costly! <b>never</b> <b>ever</b> use it in a production environment. The <code>NDEBUG</code> guard ensures that it is never compiled in a final version of the runtime environment, so keep it only as a debugging function.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>A pointer to the message to validate </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="communication_8c_source.html#l00664">664</a> of file <a class="el" href="communication_8c_source.html">communication.c</a>.</p>

<p><div id="dynsection-27" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-27-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-27-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-27-content" class="dyncontent" style="display:none;">
<div class="center"><img src="communication_8h_aebec05b86f3467473116d555954b80f4_cgraph.png" border="0" usemap="#communication_8h_aebec05b86f3467473116d555954b80f4_cgraph" alt=""/></div>
<map name="communication_8h_aebec05b86f3467473116d555954b80f4_cgraph" id="communication_8h_aebec05b86f3467473116d555954b80f4_cgraph">
<area shape="rect" id="node2" href="communication_8c.html#ab442ee81854e910ac0b21e3caf21cc48" title="Tell the GID of the sender of a message, given its mark. " alt="" coords="160,5,261,32"/>
</map>
</div>
</p>

<p><div id="dynsection-28" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-28-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-28-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-28-content" class="dyncontent" style="display:none;">
<div class="center"><img src="communication_8h_aebec05b86f3467473116d555954b80f4_icgraph.png" border="0" usemap="#communication_8h_aebec05b86f3467473116d555954b80f4_icgraph" alt=""/></div>
<map name="communication_8h_aebec05b86f3467473116d555954b80f4_icgraph" id="communication_8h_aebec05b86f3467473116d555954b80f4_icgraph">
<area shape="rect" id="node2" href="communication_8h.html#ab5250867c0edfc326732c059b0c0c3b5" title="Send a message. " alt="" coords="373,5,427,32"/>
<area shape="rect" id="node18" href="communication_8h.html#a91ccc25aa3eaa49ec96ea9328aa99dbd" title="Convert a message to a message header. " alt="" coords="351,56,449,83"/>
<area shape="rect" id="node19" href="mpi_8h.html#ad243611fd168b265105bce70c193394d" title="Receive remote messages. " alt="" coords="704,107,868,133"/>
<area shape="rect" id="node20" href="queues_8h.html#a9ff164dd6a938afa7e892f4028c2a033" title="insert_bottom_half" alt="" coords="160,107,303,133"/>
<area shape="rect" id="node3" href="communication_8h.html#aa8047651e174f4d26bef644233b5c8f8" title="Send all antimessages for a certain LP. " alt="" coords="501,5,652,32"/>
<area shape="rect" id="node17" href="communication_8h.html#ad154a0e0c0815b786ead70143505abd6" title="Send all pending outgoing messages. " alt="" coords="497,56,656,83"/>
<area shape="rect" id="node4" href="state_8h.html#a1fd6b7926db41257e07600226d87fffa" title="rollback" alt="" coords="751,5,821,32"/>
<area shape="rect" id="node5" href="scheduler_8h.html#ac48128e72b303ea22d8ec641a9516b15" title="schedule" alt="" coords="916,31,995,57"/>
<area shape="rect" id="node6" href="gvt_2gvt_8h.html#a234e866bb1e37fa25dec9bb40134234d" title="get_last_gvt" alt="" coords="1043,132,1143,159"/>
<area shape="rect" id="node8" href="main_8c.html#aa729cb27350c33119484501e13df4fec" title="main_simulation_loop" alt="" coords="1780,175,1941,201"/>
<area shape="rect" id="node7" href="main_8c.html#af2ac8c142556588d87e6c069a4ca9894" title="end_computing" alt="" coords="1593,183,1715,209"/>
<area shape="rect" id="node10" href="queues_8h.html#a54eca9bfa893cac072d1b1d3010c2944" title="process_bottom_halves" alt="" coords="1191,132,1365,159"/>
<area shape="rect" id="node11" href="statistics_8c.html#ab7b584959699657a63a49384f07fd7a9" title="format_size" alt="" coords="1229,233,1327,260"/>
<area shape="rect" id="node9" href="main_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="2255,203,2309,229"/>
<area shape="rect" id="node12" href="statistics_8h.html#aeff52bbf045362270639b2baed20762b" title="statistics_stop" alt="" coords="1413,233,1528,260"/>
<area shape="rect" id="node13" href="core_8h.html#a8f346536ccfbe77b78ed577674beb6cf" title="simulation_shutdown" alt="" coords="1576,233,1732,260"/>
<area shape="rect" id="node14" href="core_8c.html#a9b05d2af2e233e2616633eaa706682ee" title="exit_from_simulation\l_model" alt="" coords="1783,226,1938,267"/>
<area shape="rect" id="node15" href="core_8h.html#a7fb819521b1ab5fc7644ad216fe7b465" title="base_init" alt="" coords="1989,229,2068,256"/>
<area shape="rect" id="node16" href="init_8h.html#a417eb072179d09f441dbae3125049e46" title="SystemInit" alt="" coords="2116,228,2207,255"/>
</map>
</div>
</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_6d2104db64b91953bbd7b8fedbb8a094.html">communication</a></li><li class="navelem"><a class="el" href="communication_8h.html">communication.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
