<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>The ROme OpTimistic Simulator: src/communication/mpi.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="flatdoc.css" rel="stylesheet" type="text/css"/>
<link href="inline-params.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="rs.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">The ROme OpTimistic Simulator
   &#160;<span id="projectnumber">2.0.0</span>
   </div>
   <div id="projectbrief">A General-Purpose Multithreaded Parallel/Distributed Simulation Platform</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('mpi_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">mpi.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>MPI Support Module.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &lt;<a class="el" href="mpi_8h_source.html">communication/mpi.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="wnd_8h_source.html">communication/wnd.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="communication_2gvt_8h_source.html">communication/gvt.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="communication_8h_source.html">communication/communication.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="queues_8h_source.html">queues/queues.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="core_8h_source.html">core/core.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="atomic_8h_source.html">arch/atomic.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="statistics_8h_source.html">statistics/statistics.h</a>&gt;</code><br />
</div><div class="textblock"><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Include dependency graph for mpi.c:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="mpi_8c__incl.png" border="0" usemap="#src_2communication_2mpi_8c" alt=""/></div>
<map name="src_2communication_2mpi_8c" id="src_2communication_2mpi_8c">
<area shape="rect" id="node3" href="mpi_8h.html" title="MPI Support Module. " alt="" coords="671,80,833,107"/>
<area shape="rect" id="node4" href="core_8h.html" title="Core ROOT&#45;Sim functionalities. " alt="" coords="1098,707,1193,733"/>
<area shape="rect" id="node16" href="atomic_8h.html" title="Atomic operations. " alt="" coords="266,856,377,883"/>
<area shape="rect" id="node20" href="wnd_8h.html" title="Message delivery support. " alt="" coords="307,229,469,256"/>
<area shape="rect" id="node38" href="statistics_8h.html" title="Statistics module. " alt="" coords="1204,155,1356,181"/>
<area shape="rect" id="node45" href="communication_8h.html" title="Communication Routines. " alt="" coords="1939,319,2175,345"/>
<area shape="rect" id="node48" href="communication_2gvt_8h.html" title="Distributed GVT Support module. " alt="" coords="2048,80,2205,107"/>
<area shape="rect" id="node49" href="queues_8h.html" title="Message queueing subsystem. " alt="" coords="1407,155,1539,181"/>
<area shape="rect" id="node5" href="ROOT-Sim_8h.html" title="ROOT&#45;Sim header for model development. " alt="" coords="873,781,972,808"/>
<area shape="rect" id="node15" href="thread_8h.html" title="Generic thread management facilities. " alt="" coords="1253,781,1361,808"/>
<area shape="rect" id="node21" href="list_8h.html" title="Generic Lists. " alt="" coords="209,707,329,733"/>
<area shape="rect" id="node24" href="mm_8h.html" title="Memory Manager main header. " alt="" coords="488,319,579,345"/>
<area shape="rect" id="node26" href="dymelor_8h.html" title="Dynamic Memory Logger and Restorer (DyMeLoR) " alt="" coords="780,408,895,435"/>
<area shape="rect" id="node27" href="bitmap_8h.html" title="Bitmap data type. " alt="" coords="804,632,951,659"/>
<area shape="rect" id="node29" href="state_8h.html" title="LP state management. " alt="" coords="1458,483,1555,509"/>
<area shape="rect" id="node35" href="timer_8h.html" title="Timers. " alt="" coords="788,483,887,509"/>
<area shape="rect" id="node30" href="numerical_8h.html" title="Numerical Library. " alt="" coords="1751,557,1865,584"/>
<area shape="rect" id="node31" href="abm__layer_8h_source.html" title="lib/abm_layer.h" alt="" coords="1557,557,1675,584"/>
<area shape="rect" id="node32" href="topology_8h_source.html" title="lib/topology.h" alt="" coords="1178,557,1283,584"/>
<area shape="rect" id="node33" href="jsmn__helper_8h_source.html" title="lib/jsmn_helper.h" alt="" coords="1178,632,1307,659"/>
<area shape="rect" id="node34" href="jsmn_8h_source.html" title="lib/jsmn.h" alt="" coords="940,707,1023,733"/>
<area shape="rect" id="node39" href="process_8h.html" title="LP control blocks. " alt="" coords="1398,229,1549,256"/>
<area shape="rect" id="node40" href="ecs_8h.html" title="Event &amp; Cross State Synchornization. " alt="" coords="1279,319,1366,345"/>
<area shape="rect" id="node41" href="msgchannel_8h.html" title="A (M, 1) channel for messages. " alt="" coords="1331,632,1511,659"/>
<area shape="rect" id="node42" href="ult_8h.html" title="User&#45;Level Threads Headers. " alt="" coords="1681,319,1764,345"/>
<area shape="rect" id="node46" href="cross__state__manager_8h.html" title="Per&#45;thread page table. " alt="" coords="1391,304,1556,360"/>
<area shape="rect" id="node43" href="jmp_8h.html" title="Architecture&#45;independent ULT header. " alt="" coords="1657,408,1748,435"/>
<area shape="rect" id="node44" href="x86_2jmp_8h.html" title="x86 ULT support header " alt="" coords="1631,483,1748,509"/>
</map>
</div>
</div>
<p><a href="mpi_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a05ff90b74de36380367a1d30b07ac5a5"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a05ff90b74de36380367a1d30b07ac5a5"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mpi_8c.html#a05ff90b74de36380367a1d30b07ac5a5">MPI_TYPE_STAT_LEN</a>&#160;&#160;&#160;(sizeof(struct <a class="el" href="structstat__t.html">stat_t</a>)/sizeof(double))</td></tr>
<tr class="memdesc:a05ff90b74de36380367a1d30b07ac5a5"><td class="mdescLeft">&#160;</td><td class="mdescRight">The size in bytes of the statistics custom MPI Datatype. It assumes that <a class="el" href="structstat__t.html">stat_t</a> contains only double floating point members. <br /></td></tr>
<tr class="separator:a05ff90b74de36380367a1d30b07ac5a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a621b43e2d97c134914cb2737e13e97e2"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mpi_8c.html#a621b43e2d97c134914cb2737e13e97e2">pending_msgs</a> (int tag)</td></tr>
<tr class="memdesc:a621b43e2d97c134914cb2737e13e97e2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if there are pending messages.  <a href="#a621b43e2d97c134914cb2737e13e97e2">More...</a><br /></td></tr>
<tr class="separator:a621b43e2d97c134914cb2737e13e97e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15047d29439a8f03a2747ecadda5b4a4"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mpi_8c.html#a15047d29439a8f03a2747ecadda5b4a4">is_request_completed</a> (MPI_Request *req)</td></tr>
<tr class="memdesc:a15047d29439a8f03a2747ecadda5b4a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">check if an MPI request has been completed  <a href="#a15047d29439a8f03a2747ecadda5b4a4">More...</a><br /></td></tr>
<tr class="separator:a15047d29439a8f03a2747ecadda5b4a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41390aa810e506d633d2cf01bc5973bb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mpi_8c.html#a41390aa810e506d633d2cf01bc5973bb">send_remote_msg</a> (<a class="el" href="core_8h.html#abb831098e1334cd59d2c5e374416680e">msg_t</a> *msg)</td></tr>
<tr class="memdesc:a41390aa810e506d633d2cf01bc5973bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a message to a remote LP.  <a href="#a41390aa810e506d633d2cf01bc5973bb">More...</a><br /></td></tr>
<tr class="separator:a41390aa810e506d633d2cf01bc5973bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad243611fd168b265105bce70c193394d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mpi_8c.html#ad243611fd168b265105bce70c193394d">receive_remote_msgs</a> (void)</td></tr>
<tr class="memdesc:ad243611fd168b265105bce70c193394d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receive remote messages.  <a href="#ad243611fd168b265105bce70c193394d">More...</a><br /></td></tr>
<tr class="separator:ad243611fd168b265105bce70c193394d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1eee6c486d9315786303fa10db834e15"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mpi_8c.html#a1eee6c486d9315786303fa10db834e15">all_kernels_terminated</a> (void)</td></tr>
<tr class="memdesc:a1eee6c486d9315786303fa10db834e15"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if all kernels have reached the termination condition.  <a href="#a1eee6c486d9315786303fa10db834e15">More...</a><br /></td></tr>
<tr class="separator:a1eee6c486d9315786303fa10db834e15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19d485235dd4145edaa8eabe632a77f6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mpi_8c.html#a19d485235dd4145edaa8eabe632a77f6">collect_termination</a> (void)</td></tr>
<tr class="memdesc:a19d485235dd4145edaa8eabe632a77f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if other kernels have reached the termination condition.  <a href="#a19d485235dd4145edaa8eabe632a77f6">More...</a><br /></td></tr>
<tr class="separator:a19d485235dd4145edaa8eabe632a77f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aecfbd08110aec0112352a4d920068094"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mpi_8c.html#aecfbd08110aec0112352a4d920068094">broadcast_termination</a> (void)</td></tr>
<tr class="memdesc:aecfbd08110aec0112352a4d920068094"><td class="mdescLeft">&#160;</td><td class="mdescRight">Notify all the kernels about local termination.  <a href="#aecfbd08110aec0112352a4d920068094">More...</a><br /></td></tr>
<tr class="separator:aecfbd08110aec0112352a4d920068094"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace2c9a712d7d5f8e73dda54c9de3e358"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mpi_8c.html#ace2c9a712d7d5f8e73dda54c9de3e358">reduce_stat_vector</a> (struct <a class="el" href="structstat__t.html">stat_t</a> *in, struct <a class="el" href="structstat__t.html">stat_t</a> *inout, int *len, MPI_Datatype *dptr)</td></tr>
<tr class="memdesc:ace2c9a712d7d5f8e73dda54c9de3e358"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reduce operation for statistics.  <a href="#ace2c9a712d7d5f8e73dda54c9de3e358">More...</a><br /></td></tr>
<tr class="separator:ace2c9a712d7d5f8e73dda54c9de3e358"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a013115e2b9fb4af92de3a6b212fc8065"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mpi_8c.html#a013115e2b9fb4af92de3a6b212fc8065">stats_reduction_init</a> (void)</td></tr>
<tr class="memdesc:a013115e2b9fb4af92de3a6b212fc8065"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize MPI Datatype and Operation for statistics reduction.  <a href="#a013115e2b9fb4af92de3a6b212fc8065">More...</a><br /></td></tr>
<tr class="separator:a013115e2b9fb4af92de3a6b212fc8065"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aacc8b2ae1bd4babd815a15b52ac2dc2a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mpi_8c.html#aacc8b2ae1bd4babd815a15b52ac2dc2a">mpi_reduce_statistics</a> (struct <a class="el" href="structstat__t.html">stat_t</a> *global, struct <a class="el" href="structstat__t.html">stat_t</a> *local)</td></tr>
<tr class="memdesc:aacc8b2ae1bd4babd815a15b52ac2dc2a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Invoke statistics reduction.  <a href="#aacc8b2ae1bd4babd815a15b52ac2dc2a">More...</a><br /></td></tr>
<tr class="separator:aacc8b2ae1bd4babd815a15b52ac2dc2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e129776fd0d7fc31a255a396ce28c39"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mpi_8c.html#a6e129776fd0d7fc31a255a396ce28c39">dist_termination_init</a> (void)</td></tr>
<tr class="memdesc:a6e129776fd0d7fc31a255a396ce28c39"><td class="mdescLeft">&#160;</td><td class="mdescRight">Setup the distributed termination subsystem.  <a href="#a6e129776fd0d7fc31a255a396ce28c39">More...</a><br /></td></tr>
<tr class="separator:a6e129776fd0d7fc31a255a396ce28c39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ac4bf6fda6cd92f529134aac34edabf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mpi_8c.html#a3ac4bf6fda6cd92f529134aac34edabf">dist_termination_finalize</a> (void)</td></tr>
<tr class="memdesc:a3ac4bf6fda6cd92f529134aac34edabf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cleanup routine of the distributed termination subsystem.  <a href="#a3ac4bf6fda6cd92f529134aac34edabf">More...</a><br /></td></tr>
<tr class="separator:a3ac4bf6fda6cd92f529134aac34edabf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d5b6bd7866b813152f5ead12012dc46"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mpi_8c.html#a4d5b6bd7866b813152f5ead12012dc46">syncronize_all</a> (void)</td></tr>
<tr class="memdesc:a4d5b6bd7866b813152f5ead12012dc46"><td class="mdescLeft">&#160;</td><td class="mdescRight">Syncronize all the kernels.  <a href="#a4d5b6bd7866b813152f5ead12012dc46">More...</a><br /></td></tr>
<tr class="separator:a4d5b6bd7866b813152f5ead12012dc46"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa28df986cba93d0b18e22584f3d7a68e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mpi_8c.html#aa28df986cba93d0b18e22584f3d7a68e">mpi_init</a> (int *argc, char ***argv)</td></tr>
<tr class="memdesc:aa28df986cba93d0b18e22584f3d7a68e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize MPI subsystem.  <a href="#aa28df986cba93d0b18e22584f3d7a68e">More...</a><br /></td></tr>
<tr class="separator:aa28df986cba93d0b18e22584f3d7a68e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae0b9d97e0c3d31df6e27e2455e66a13"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mpi_8c.html#aae0b9d97e0c3d31df6e27e2455e66a13">inter_kernel_comm_init</a> (void)</td></tr>
<tr class="memdesc:aae0b9d97e0c3d31df6e27e2455e66a13"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize inter-kernel communication.  <a href="#aae0b9d97e0c3d31df6e27e2455e66a13">More...</a><br /></td></tr>
<tr class="separator:aae0b9d97e0c3d31df6e27e2455e66a13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38b0bdfeab3308a62e50dc362ebd2a68"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mpi_8c.html#a38b0bdfeab3308a62e50dc362ebd2a68">inter_kernel_comm_finalize</a> (void)</td></tr>
<tr class="memdesc:a38b0bdfeab3308a62e50dc362ebd2a68"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finalize inter-kernel communication.  <a href="#a38b0bdfeab3308a62e50dc362ebd2a68">More...</a><br /></td></tr>
<tr class="separator:a38b0bdfeab3308a62e50dc362ebd2a68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7210aa16a06c6aab812ae96561c30a8d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mpi_8c.html#a7210aa16a06c6aab812ae96561c30a8d">mpi_finalize</a> (void)</td></tr>
<tr class="memdesc:a7210aa16a06c6aab812ae96561c30a8d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finalize MPI.  <a href="#a7210aa16a06c6aab812ae96561c30a8d">More...</a><br /></td></tr>
<tr class="separator:a7210aa16a06c6aab812ae96561c30a8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a3e82f40925f9eb936be2724f92e9524f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3e82f40925f9eb936be2724f92e9524f"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mpi_8c.html#a3e82f40925f9eb936be2724f92e9524f">mpi_support_multithread</a></td></tr>
<tr class="memdesc:a3e82f40925f9eb936be2724f92e9524f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flag telling whether the MPI runtime supports multithreading. <br /></td></tr>
<tr class="separator:a3e82f40925f9eb936be2724f92e9524f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46fe48a4497654d137246733217dad47"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structspinlock__t.html">spinlock_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mpi_8c.html#a46fe48a4497654d137246733217dad47">mpi_lock</a></td></tr>
<tr class="separator:a46fe48a4497654d137246733217dad47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab211e786b2225d75bd4adc2554104328"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab211e786b2225d75bd4adc2554104328"></a>
static <a class="el" href="structspinlock__t.html">spinlock_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mpi_8c.html#ab211e786b2225d75bd4adc2554104328">msgs_lock</a></td></tr>
<tr class="memdesc:ab211e786b2225d75bd4adc2554104328"><td class="mdescLeft">&#160;</td><td class="mdescRight">A guard to ensure isolation in the the message receiving routine. <br /></td></tr>
<tr class="separator:ab211e786b2225d75bd4adc2554104328"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a413a65c2f20603153b4dd8c7b414db54"><td class="memItemLeft" align="right" valign="top">static unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mpi_8c.html#a413a65c2f20603153b4dd8c7b414db54">terminated</a> = 0</td></tr>
<tr class="separator:a413a65c2f20603153b4dd8c7b414db54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6ee4ca9f4fd5e8df68004fc0d57673a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa6ee4ca9f4fd5e8df68004fc0d57673a"></a>
static MPI_Request *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mpi_8c.html#aa6ee4ca9f4fd5e8df68004fc0d57673a">termination_reqs</a></td></tr>
<tr class="memdesc:aa6ee4ca9f4fd5e8df68004fc0d57673a"><td class="mdescLeft">&#160;</td><td class="mdescRight">MPI Requests to handle termination detection collection asynchronously. <br /></td></tr>
<tr class="separator:aa6ee4ca9f4fd5e8df68004fc0d57673a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68648ea35fb1d1662a6e18325acc334d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a68648ea35fb1d1662a6e18325acc334d"></a>
static <a class="el" href="structspinlock__t.html">spinlock_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mpi_8c.html#a68648ea35fb1d1662a6e18325acc334d">msgs_fini</a></td></tr>
<tr class="memdesc:a68648ea35fb1d1662a6e18325acc334d"><td class="mdescLeft">&#160;</td><td class="mdescRight">A guard to ensure isolation in <a class="el" href="mpi_8c.html#a19d485235dd4145edaa8eabe632a77f6" title="Check if other kernels have reached the termination condition. ">collect_termination()</a> <br /></td></tr>
<tr class="separator:a68648ea35fb1d1662a6e18325acc334d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed467d46a8af2392f12767bc8f1f2462"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aed467d46a8af2392f12767bc8f1f2462"></a>
static MPI_Op&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mpi_8c.html#aed467d46a8af2392f12767bc8f1f2462">reduce_stats_op</a></td></tr>
<tr class="memdesc:aed467d46a8af2392f12767bc8f1f2462"><td class="mdescLeft">&#160;</td><td class="mdescRight">MPI Operation to reduce statics. <br /></td></tr>
<tr class="separator:aed467d46a8af2392f12767bc8f1f2462"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7111c0c6a661d8177c9a669942ebc9c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae7111c0c6a661d8177c9a669942ebc9c"></a>
static MPI_Datatype&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mpi_8c.html#ae7111c0c6a661d8177c9a669942ebc9c">stats_mpi_t</a></td></tr>
<tr class="memdesc:ae7111c0c6a661d8177c9a669942ebc9c"><td class="mdescLeft">&#160;</td><td class="mdescRight">MPI Datatype to describe the content of a struct <a class="el" href="structstat__t.html">stat_t</a>. <br /></td></tr>
<tr class="separator:ae7111c0c6a661d8177c9a669942ebc9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1fe3bf2e6acc84dcfee27e902f41c676"><td class="memItemLeft" align="right" valign="top">static MPI_Comm&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mpi_8c.html#a1fe3bf2e6acc84dcfee27e902f41c676">msg_comm</a></td></tr>
<tr class="memdesc:a1fe3bf2e6acc84dcfee27e902f41c676"><td class="mdescLeft">&#160;</td><td class="mdescRight">MPI Communicator for event/control messages.  <a href="#a1fe3bf2e6acc84dcfee27e902f41c676">More...</a><br /></td></tr>
<tr class="separator:a1fe3bf2e6acc84dcfee27e902f41c676"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>MPI Support Module. </p>
<p>This module implements all basic MPI facilities to let the distributed execution of a simulation model take place consistently.</p>
<p>Several facilities are thread-safe, others are not. Check carefully which of these can be used by worker threads without coordination when relying on this module.</p>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright (C) 2008-2019 HPDCS Group <a href="https://hpdcs.github.io">https://hpdcs.github.io</a></dd></dl>
<p>This file is part of ROOT-Sim (ROme OpTimistic Simulator).</p>
<p>ROOT-Sim is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation; only version 3 of the License applies.</p>
<p>ROOT-Sim is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</p>
<p>You should have received a copy of the GNU General Public License along with ROOT-Sim; if not, write to the Free Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA</p>
<dl class="section author"><dt>Author</dt><dd>Tommaso Tocci </dd></dl>

<p>Definition in file <a class="el" href="mpi_8c_source.html">mpi.c</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a1eee6c486d9315786303fa10db834e15"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool all_kernels_terminated </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check if all kernels have reached the termination condition. </p>
<p>This function checks whether all threads have been informed of the fact that the simulation should be halted, and they have taken proper actions to terminate. Once this function confirms this condition, the process can safely exit.</p>
<dl class="section warning"><dt>Warning</dt><dd>This function can be called only <b>after</b> a call to <a class="el" href="mpi_8c.html#aecfbd08110aec0112352a4d920068094" title="Notify all the kernels about local termination. ">broadcast_termination()</a></dd></dl>
<dl class="section return"><dt>Returns</dt><dd><code>true</code> if all the kernel have reached the termination condition </dd></dl>

<p>Definition at line <a class="el" href="mpi_8c_source.html#l00270">270</a> of file <a class="el" href="mpi_8c_source.html">mpi.c</a>.</p>

</div>
</div>
<a class="anchor" id="aecfbd08110aec0112352a4d920068094"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void broadcast_termination </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Notify all the kernels about local termination. </p>
<p>This function is used to inform all other simulation kernel instances that this kernel is ready to terminate the simulation.</p>
<dl class="section warning"><dt>Warning</dt><dd>This function is not thread safe and should be used only by one thread at a time</dd></dl>
<dl class="section note"><dt>Note</dt><dd>This function can be used concurrently with other MPI functions (hence its thread unsafety)</dd>
<dd>
This function can be called multiple times, but the actual broadcast operation will be executed only on the first call. </dd></dl>

<p>Definition at line <a class="el" href="mpi_8c_source.html#l00327">327</a> of file <a class="el" href="mpi_8c_source.html">mpi.c</a>.</p>

</div>
</div>
<a class="anchor" id="a19d485235dd4145edaa8eabe632a77f6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void collect_termination </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check if other kernels have reached the termination condition. </p>
<p>This function accumulates termination acknoledgements from remote kernels, and updates the <a class="el" href="mpi_8c.html#a413a65c2f20603153b4dd8c7b414db54">terminated</a> counter.</p>
<dl class="section note"><dt>Note</dt><dd>This function can be called at any point of the simulation, but it will be effective only after that <a class="el" href="mpi_8c.html#aecfbd08110aec0112352a4d920068094" title="Notify all the kernels about local termination. ">broadcast_termination()</a> has been called locally.</dd>
<dd>
This function is thread-safe </dd></dl>

<p>Definition at line <a class="el" href="mpi_8c_source.html#l00289">289</a> of file <a class="el" href="mpi_8c_source.html">mpi.c</a>.</p>

<p><div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="mpi_8c_a19d485235dd4145edaa8eabe632a77f6_cgraph.png" border="0" usemap="#mpi_8c_a19d485235dd4145edaa8eabe632a77f6_cgraph" alt=""/></div>
<map name="mpi_8c_a19d485235dd4145edaa8eabe632a77f6_cgraph" id="mpi_8c_a19d485235dd4145edaa8eabe632a77f6_cgraph">
<area shape="rect" id="node2" href="atomic_8h.html#afd2c05472274bd1c73d5408a213cf429" title="spin_trylock" alt="" coords="206,5,303,32"/>
<area shape="rect" id="node4" href="mpi_8c.html#a621b43e2d97c134914cb2737e13e97e2" title="Check if there are pending messages. " alt="" coords="197,56,312,83"/>
<area shape="rect" id="node5" href="atomic_8h.html#a4e8c9d1c6101995f1ecd2141d77e4824" title="spin_unlock" alt="" coords="207,107,303,133"/>
<area shape="rect" id="node3" href="x86_8c.html#af8f8b0714bc5f4f7238feae5ca425117" title="atomic_test_and_set" alt="" coords="360,5,516,32"/>
</map>
</div>
</p>

<p><div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="mpi_8c_a19d485235dd4145edaa8eabe632a77f6_icgraph.png" border="0" usemap="#mpi_8c_a19d485235dd4145edaa8eabe632a77f6_icgraph" alt=""/></div>
<map name="mpi_8c_a19d485235dd4145edaa8eabe632a77f6_icgraph" id="mpi_8c_a19d485235dd4145edaa8eabe632a77f6_icgraph">
<area shape="rect" id="node2" href="main_8c.html#aa729cb27350c33119484501e13df4fec" title="main_simulation_loop" alt="" coords="197,5,359,32"/>
<area shape="rect" id="node3" href="main_8c.html#af2ac8c142556588d87e6c069a4ca9894" title="end_computing" alt="" coords="407,5,528,32"/>
<area shape="rect" id="node4" href="main_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="440,56,495,83"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a3ac4bf6fda6cd92f529134aac34edabf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dist_termination_finalize </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Cleanup routine of the distributed termination subsystem. </p>
<p>Once this function returns, it is sure that we can terminate safely the simulation. </p>

<p>Definition at line <a class="el" href="mpi_8c_source.html#l00471">471</a> of file <a class="el" href="mpi_8c_source.html">mpi.c</a>.</p>

<p><div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="mpi_8c_a3ac4bf6fda6cd92f529134aac34edabf_icgraph.png" border="0" usemap="#mpi_8c_a3ac4bf6fda6cd92f529134aac34edabf_icgraph" alt=""/></div>
<map name="mpi_8c_a3ac4bf6fda6cd92f529134aac34edabf_icgraph" id="mpi_8c_a3ac4bf6fda6cd92f529134aac34edabf_icgraph">
<area shape="rect" id="node2" href="mpi_8h.html#a38b0bdfeab3308a62e50dc362ebd2a68" title="Finalize inter&#45;kernel communication. " alt="" coords="231,51,427,77"/>
<area shape="rect" id="node3" href="communication_8h.html#a6bd2f352e0326608e9a2bef2efbde184" title="Finalize the communication subsystem. " alt="" coords="475,51,621,77"/>
<area shape="rect" id="node4" href="core_8h.html#a8f346536ccfbe77b78ed577674beb6cf" title="simulation_shutdown" alt="" coords="669,51,825,77"/>
<area shape="rect" id="node5" href="core_8c.html#a9b05d2af2e233e2616633eaa706682ee" title="exit_from_simulation\l_model" alt="" coords="877,9,1031,50"/>
<area shape="rect" id="node9" href="main_8c.html#aa729cb27350c33119484501e13df4fec" title="main_simulation_loop" alt="" coords="873,85,1035,112"/>
<area shape="rect" id="node6" href="core_8h.html#a7fb819521b1ab5fc7644ad216fe7b465" title="base_init" alt="" coords="1104,5,1183,32"/>
<area shape="rect" id="node7" href="init_8h.html#a417eb072179d09f441dbae3125049e46" title="SystemInit" alt="" coords="1252,5,1343,32"/>
<area shape="rect" id="node8" href="main_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="1391,31,1445,57"/>
<area shape="rect" id="node10" href="main_8c.html#af2ac8c142556588d87e6c069a4ca9894" title="end_computing" alt="" coords="1083,107,1204,133"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a6e129776fd0d7fc31a255a396ce28c39"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dist_termination_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Setup the distributed termination subsystem. </p>
<p>To correctly terminate a distributed simulation, some care must be taken. In particular:</p><ul>
<li>we must be use that no deadlock is generated, e.g. because some simulation kernel is already waiting for some synchronization action by other kernels</li>
<li>we must be sure that no MPI action is in place/still pending, when MPI_Finalize() is called.</li>
</ul>
<p>To this end, a specific distributed termination protocol is put in place, which requires some data structures to be available.</p>
<p>This function initializes the subsystem and the datastructures which ensure a clean a nice shutdown of distributed simulations. </p>

<p>Definition at line <a class="el" href="mpi_8c_source.html#l00452">452</a> of file <a class="el" href="mpi_8c_source.html">mpi.c</a>.</p>

<p><div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><img src="mpi_8c_a6e129776fd0d7fc31a255a396ce28c39_icgraph.png" border="0" usemap="#mpi_8c_a6e129776fd0d7fc31a255a396ce28c39_icgraph" alt=""/></div>
<map name="mpi_8c_a6e129776fd0d7fc31a255a396ce28c39_icgraph" id="mpi_8c_a6e129776fd0d7fc31a255a396ce28c39_icgraph">
<area shape="rect" id="node2" href="mpi_8h.html#aae0b9d97e0c3d31df6e27e2455e66a13" title="Initialize inter&#45;kernel communication. " alt="" coords="205,5,376,32"/>
<area shape="rect" id="node3" href="communication_8h.html#a9d1c122bc3538d94d6fd8328cd6c6a2d" title="Initialize the communication subsystem. " alt="" coords="424,5,571,32"/>
<area shape="rect" id="node4" href="init_8h.html#a417eb072179d09f441dbae3125049e46" title="SystemInit" alt="" coords="619,5,709,32"/>
<area shape="rect" id="node5" href="main_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="757,5,812,32"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a38b0bdfeab3308a62e50dc362ebd2a68"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void inter_kernel_comm_finalize </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Finalize inter-kernel communication. </p>
<p>This function shutdown the subsystems associated with inter-kernel communication. </p>

<p>Definition at line <a class="el" href="mpi_8c_source.html#l00562">562</a> of file <a class="el" href="mpi_8c_source.html">mpi.c</a>.</p>

<p><div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><img src="mpi_8c_a38b0bdfeab3308a62e50dc362ebd2a68_cgraph.png" border="0" usemap="#mpi_8c_a38b0bdfeab3308a62e50dc362ebd2a68_cgraph" alt=""/></div>
<map name="mpi_8c_a38b0bdfeab3308a62e50dc362ebd2a68_cgraph" id="mpi_8c_a38b0bdfeab3308a62e50dc362ebd2a68_cgraph">
<area shape="rect" id="node2" href="mpi_8c.html#a3ac4bf6fda6cd92f529134aac34edabf" title="Cleanup routine of the distributed termination subsystem. " alt="" coords="249,5,427,32"/>
<area shape="rect" id="node3" href="communication_2gvt_8c.html#ac35f5f227c553fffd0911c995c865e17" title="Shut down the MPI&#45;based distributed GVT reduction submodule. " alt="" coords="267,56,409,83"/>
<area shape="rect" id="node4" href="communication_2gvt_8c.html#abb460bc63d1b830804752ce6bdd4e30a" title="Check if there are pending GVT&#45;init messages around. " alt="" coords="475,31,601,57"/>
<area shape="rect" id="node6" href="communication_2gvt_8c.html#a97741fc617b443cee108c44a26cd513b" title="Forcely extract GVT&#45;init message from MPI. " alt="" coords="485,81,591,108"/>
<area shape="rect" id="node5" href="mpi_8c.html#a621b43e2d97c134914cb2737e13e97e2" title="Check if there are pending messages. " alt="" coords="649,31,764,57"/>
</map>
</div>
</p>

<p><div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><img src="mpi_8c_a38b0bdfeab3308a62e50dc362ebd2a68_icgraph.png" border="0" usemap="#mpi_8c_a38b0bdfeab3308a62e50dc362ebd2a68_icgraph" alt=""/></div>
<map name="mpi_8c_a38b0bdfeab3308a62e50dc362ebd2a68_icgraph" id="mpi_8c_a38b0bdfeab3308a62e50dc362ebd2a68_icgraph">
<area shape="rect" id="node2" href="communication_8h.html#a6bd2f352e0326608e9a2bef2efbde184" title="Finalize the communication subsystem. " alt="" coords="249,51,396,77"/>
<area shape="rect" id="node3" href="core_8h.html#a8f346536ccfbe77b78ed577674beb6cf" title="simulation_shutdown" alt="" coords="444,51,600,77"/>
<area shape="rect" id="node4" href="core_8c.html#a9b05d2af2e233e2616633eaa706682ee" title="exit_from_simulation\l_model" alt="" coords="651,9,806,50"/>
<area shape="rect" id="node8" href="main_8c.html#aa729cb27350c33119484501e13df4fec" title="main_simulation_loop" alt="" coords="648,85,809,112"/>
<area shape="rect" id="node5" href="core_8h.html#a7fb819521b1ab5fc7644ad216fe7b465" title="base_init" alt="" coords="879,5,957,32"/>
<area shape="rect" id="node6" href="init_8h.html#a417eb072179d09f441dbae3125049e46" title="SystemInit" alt="" coords="1027,5,1117,32"/>
<area shape="rect" id="node7" href="main_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="1165,31,1220,57"/>
<area shape="rect" id="node9" href="main_8c.html#af2ac8c142556588d87e6c069a4ca9894" title="end_computing" alt="" coords="857,107,979,133"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aae0b9d97e0c3d31df6e27e2455e66a13"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void inter_kernel_comm_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize inter-kernel communication. </p>
<p>This function initializes inter-kernel communication, by initializing all the other communication subsystems. </p>

<p>Definition at line <a class="el" href="mpi_8c_source.html#l00545">545</a> of file <a class="el" href="mpi_8c_source.html">mpi.c</a>.</p>

<p><div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><img src="mpi_8c_aae0b9d97e0c3d31df6e27e2455e66a13_cgraph.png" border="0" usemap="#mpi_8c_aae0b9d97e0c3d31df6e27e2455e66a13_cgraph" alt=""/></div>
<map name="mpi_8c_aae0b9d97e0c3d31df6e27e2455e66a13_cgraph" id="mpi_8c_aae0b9d97e0c3d31df6e27e2455e66a13_cgraph">
<area shape="rect" id="node2" href="wnd_8c.html#a620f72de0294d3c638894de54d14ea27" title="Outgoing queue initialization. " alt="" coords="224,5,380,32"/>
<area shape="rect" id="node3" href="communication_2gvt_8c.html#ae0cb1aa4dae8060ac662c0534849ecf3" title="Initialize the MPI&#45;based distributed GVT reduction submodule. " alt="" coords="244,56,360,83"/>
<area shape="rect" id="node4" href="mpi_8c.html#a6e129776fd0d7fc31a255a396ce28c39" title="Setup the distributed termination subsystem. " alt="" coords="226,107,378,133"/>
<area shape="rect" id="node5" href="mpi_8c.html#a013115e2b9fb4af92de3a6b212fc8065" title="Initialize MPI Datatype and Operation for statistics reduction. " alt="" coords="229,157,375,184"/>
<area shape="rect" id="node6" href="mpi_8c.html#ace2c9a712d7d5f8e73dda54c9de3e358" title="Reduce operation for statistics. " alt="" coords="428,157,573,184"/>
</map>
</div>
</p>

<p><div id="dynsection-8" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><img src="mpi_8c_aae0b9d97e0c3d31df6e27e2455e66a13_icgraph.png" border="0" usemap="#mpi_8c_aae0b9d97e0c3d31df6e27e2455e66a13_icgraph" alt=""/></div>
<map name="mpi_8c_aae0b9d97e0c3d31df6e27e2455e66a13_icgraph" id="mpi_8c_aae0b9d97e0c3d31df6e27e2455e66a13_icgraph">
<area shape="rect" id="node2" href="communication_8h.html#a9d1c122bc3538d94d6fd8328cd6c6a2d" title="Initialize the communication subsystem. " alt="" coords="224,5,371,32"/>
<area shape="rect" id="node3" href="init_8h.html#a417eb072179d09f441dbae3125049e46" title="SystemInit" alt="" coords="419,5,509,32"/>
<area shape="rect" id="node4" href="main_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="557,5,612,32"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a15047d29439a8f03a2747ecadda5b4a4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool is_request_completed </td>
          <td>(</td>
          <td class="paramtype">MPI_Request *&#160;</td>
          <td class="paramname"><em>req</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>check if an MPI request has been completed </p>
<p>This function checks whether the operation associated with the specified MPI Request has been completed or not.</p>
<dl class="section note"><dt>Note</dt><dd>This function is thread-safe.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">req</td><td>A pointer to the MPI_Request to check for completion</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>true</code> if the operation associated with <code>req</code> is complete, <code>false</code> otherwise. </dd></dl>

<p>Definition at line <a class="el" href="mpi_8c_source.html#l00144">144</a> of file <a class="el" href="mpi_8c_source.html">mpi.c</a>.</p>

<p><div id="dynsection-9" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><img src="mpi_8c_a15047d29439a8f03a2747ecadda5b4a4_icgraph.png" border="0" usemap="#mpi_8c_a15047d29439a8f03a2747ecadda5b4a4_icgraph" alt=""/></div>
<map name="mpi_8c_a15047d29439a8f03a2747ecadda5b4a4_icgraph" id="mpi_8c_a15047d29439a8f03a2747ecadda5b4a4_icgraph">
<area shape="rect" id="node2" href="communication_2gvt_8h.html#ad754b4a17c642f9672743a0a246e6467" title="Test completion of white message reduction collective operation. " alt="" coords="216,5,424,32"/>
<area shape="rect" id="node7" href="communication_2gvt_8h.html#ae81bd7f5958dcb41dad5c697a6628569" title="Initiate a distributed GVT. " alt="" coords="251,56,389,83"/>
<area shape="rect" id="node8" href="communication_2gvt_8h.html#a0d0d87c4ff2f7290727fc3d3f9b2034f" title="Check if final GVT reduction is complete. " alt="" coords="240,107,400,133"/>
<area shape="rect" id="node9" href="wnd_8c.html#af652d88db30c0405a4d1bfc6de43cffc" title="Check if a message has been delivered. " alt="" coords="254,157,386,184"/>
<area shape="rect" id="node3" href="gvt_2gvt_8h.html#a899b50ab45427cf145360ff3a6c29808" title="gvt_operations" alt="" coords="498,60,615,87"/>
<area shape="rect" id="node4" href="main_8c.html#aa729cb27350c33119484501e13df4fec" title="main_simulation_loop" alt="" coords="923,76,1085,103"/>
<area shape="rect" id="node5" href="main_8c.html#af2ac8c142556588d87e6c069a4ca9894" title="end_computing" alt="" coords="1143,76,1264,103"/>
<area shape="rect" id="node6" href="main_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="1176,127,1231,153"/>
<area shape="rect" id="node10" href="wnd_8c.html#a9b192f19fc6af0cfd7bcefd788b0b93f" title="Prune an outgoing queue. " alt="" coords="472,132,641,159"/>
<area shape="rect" id="node11" href="wnd_8h.html#a157ee75a6300b4d0ae3c99afe8c3ae6a" title="Prune all outgoing queues. " alt="" coords="689,129,865,156"/>
<area shape="rect" id="node12" href="wnd_8h.html#acbe46c456aa03b014ca2134604700789" title="Finalize the message delivery subsystem. " alt="" coords="913,129,1095,156"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a7210aa16a06c6aab812ae96561c30a8d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mpi_finalize </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Finalize MPI. </p>
<p>This function shutdown the MPI subsystem</p>
<dl class="section note"><dt>Note</dt><dd>Only the master thread on each simulation kernel is expected to call this function </dd></dl>

<p>Definition at line <a class="el" href="mpi_8c_source.html#l00578">578</a> of file <a class="el" href="mpi_8c_source.html">mpi.c</a>.</p>

<p><div id="dynsection-10" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><img src="mpi_8c_a7210aa16a06c6aab812ae96561c30a8d_icgraph.png" border="0" usemap="#mpi_8c_a7210aa16a06c6aab812ae96561c30a8d_icgraph" alt=""/></div>
<map name="mpi_8c_a7210aa16a06c6aab812ae96561c30a8d_icgraph" id="mpi_8c_a7210aa16a06c6aab812ae96561c30a8d_icgraph">
<area shape="rect" id="node2" href="communication_8h.html#a6bd2f352e0326608e9a2bef2efbde184" title="Finalize the communication subsystem. " alt="" coords="151,51,297,77"/>
<area shape="rect" id="node3" href="core_8h.html#a8f346536ccfbe77b78ed577674beb6cf" title="simulation_shutdown" alt="" coords="345,51,501,77"/>
<area shape="rect" id="node4" href="core_8c.html#a9b05d2af2e233e2616633eaa706682ee" title="exit_from_simulation\l_model" alt="" coords="553,9,707,50"/>
<area shape="rect" id="node8" href="main_8c.html#aa729cb27350c33119484501e13df4fec" title="main_simulation_loop" alt="" coords="549,85,711,112"/>
<area shape="rect" id="node5" href="core_8h.html#a7fb819521b1ab5fc7644ad216fe7b465" title="base_init" alt="" coords="780,5,859,32"/>
<area shape="rect" id="node6" href="init_8h.html#a417eb072179d09f441dbae3125049e46" title="SystemInit" alt="" coords="928,5,1019,32"/>
<area shape="rect" id="node7" href="main_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="1067,31,1121,57"/>
<area shape="rect" id="node9" href="main_8c.html#af2ac8c142556588d87e6c069a4ca9894" title="end_computing" alt="" coords="759,107,880,133"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa28df986cba93d0b18e22584f3d7a68e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mpi_init </td>
          <td>(</td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char ***&#160;</td>
          <td class="paramname"><em>argv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize MPI subsystem. </p>
<p>This is mainly a wrapper of MPI_Init, which contains some boilerplate code to initialize datastructures.</p>
<p>Most notably, here we determine if the library which we are using has suitable multithreading support, and we setup the MPI Communicator which will be used later on to exhange model-specific messages. </p>

<p>Definition at line <a class="el" href="mpi_8c_source.html#l00514">514</a> of file <a class="el" href="mpi_8c_source.html">mpi.c</a>.</p>

<p><div id="dynsection-11" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-11-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-11-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-11-content" class="dyncontent" style="display:none;">
<div class="center"><img src="mpi_8c_aa28df986cba93d0b18e22584f3d7a68e_icgraph.png" border="0" usemap="#mpi_8c_aa28df986cba93d0b18e22584f3d7a68e_icgraph" alt=""/></div>
<map name="mpi_8c_aa28df986cba93d0b18e22584f3d7a68e_icgraph" id="mpi_8c_aa28df986cba93d0b18e22584f3d7a68e_icgraph">
<area shape="rect" id="node2" href="init_8h.html#a417eb072179d09f441dbae3125049e46" title="SystemInit" alt="" coords="125,5,216,32"/>
<area shape="rect" id="node3" href="main_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="264,5,319,32"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aacc8b2ae1bd4babd815a15b52ac2dc2a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mpi_reduce_statistics </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structstat__t.html">stat_t</a> *&#160;</td>
          <td class="paramname"><em>global</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structstat__t.html">stat_t</a> *&#160;</td>
          <td class="paramname"><em>local</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Invoke statistics reduction. </p>
<p>This function is a simple wrapper of an MPI_Reduce operation, which uses the custom reduce operation implemented in <a class="el" href="mpi_8c.html#ace2c9a712d7d5f8e73dda54c9de3e358" title="Reduce operation for statistics. ">reduce_stat_vector()</a> to gather reduced statistics in the master kernel (rank 0).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">global</td><td>A pointer to a struct <a class="el" href="structstat__t.html">stat_t</a> where reduced statistics will be stored. The reduction only takes place at rank 0, therefore other simulation kernel instances will never read actual meaningful information in that structure. </td></tr>
    <tr><td class="paramname">local</td><td>A pointer to a local struct <a class="el" href="structstat__t.html">stat_t</a> which is used as the source of information for the distributed reduction operation. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mpi_8c_source.html#l00428">428</a> of file <a class="el" href="mpi_8c_source.html">mpi.c</a>.</p>

<p><div id="dynsection-12" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-12-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-12-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-12-content" class="dyncontent" style="display:none;">
<div class="center"><img src="mpi_8c_aacc8b2ae1bd4babd815a15b52ac2dc2a_icgraph.png" border="0" usemap="#mpi_8c_aacc8b2ae1bd4babd815a15b52ac2dc2a_icgraph" alt=""/></div>
<map name="mpi_8c_aacc8b2ae1bd4babd815a15b52ac2dc2a_icgraph" id="mpi_8c_aacc8b2ae1bd4babd815a15b52ac2dc2a_icgraph">
<area shape="rect" id="node2" href="statistics_8h.html#aeff52bbf045362270639b2baed20762b" title="statistics_stop" alt="" coords="215,51,329,77"/>
<area shape="rect" id="node3" href="core_8h.html#a8f346536ccfbe77b78ed577674beb6cf" title="simulation_shutdown" alt="" coords="377,51,533,77"/>
<area shape="rect" id="node4" href="core_8c.html#a9b05d2af2e233e2616633eaa706682ee" title="exit_from_simulation\l_model" alt="" coords="585,9,739,50"/>
<area shape="rect" id="node8" href="main_8c.html#aa729cb27350c33119484501e13df4fec" title="main_simulation_loop" alt="" coords="581,85,743,112"/>
<area shape="rect" id="node5" href="core_8h.html#a7fb819521b1ab5fc7644ad216fe7b465" title="base_init" alt="" coords="812,5,891,32"/>
<area shape="rect" id="node6" href="init_8h.html#a417eb072179d09f441dbae3125049e46" title="SystemInit" alt="" coords="960,5,1051,32"/>
<area shape="rect" id="node7" href="main_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="1099,31,1153,57"/>
<area shape="rect" id="node9" href="main_8c.html#af2ac8c142556588d87e6c069a4ca9894" title="end_computing" alt="" coords="791,107,912,133"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a621b43e2d97c134914cb2737e13e97e2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool pending_msgs </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>tag</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check if there are pending messages. </p>
<p>This function tells whether there is a pending message in the underlying MPI library coming from any remote simulation kernel instance. If passing a tag different from MPI_ANY_TAG to this function, a specific tag can be extracted.</p>
<p>Messages are only extracted from MPI_COMM_WORLD communicator. This is therefore only useful in startup/shutdown operations (this is used indeed to initiate GVT and conclude the distributed simulation shutdown).</p>
<dl class="section note"><dt>Note</dt><dd>This function is thread-safe.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tag</td><td>The tag of the messages to check for availability.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>true</code> if a pending message tagged with <code>tag</code> is found, <code>false</code> otherwise. </dd></dl>

<p>Definition at line <a class="el" href="mpi_8c_source.html#l00122">122</a> of file <a class="el" href="mpi_8c_source.html">mpi.c</a>.</p>

<p><div id="dynsection-13" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-13-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-13-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-13-content" class="dyncontent" style="display:none;">
<div class="center"><img src="mpi_8c_a621b43e2d97c134914cb2737e13e97e2_icgraph.png" border="0" usemap="#mpi_8c_a621b43e2d97c134914cb2737e13e97e2_icgraph" alt=""/></div>
<map name="mpi_8c_a621b43e2d97c134914cb2737e13e97e2_icgraph" id="mpi_8c_a621b43e2d97c134914cb2737e13e97e2_icgraph">
<area shape="rect" id="node2" href="communication_2gvt_8h.html#abb460bc63d1b830804752ce6bdd4e30a" title="Check if there are pending GVT&#45;init messages around. " alt="" coords="168,120,295,147"/>
<area shape="rect" id="node18" href="mpi_8h.html#a19d485235dd4145edaa8eabe632a77f6" title="Check if other kernels have reached the termination condition. " alt="" coords="977,259,1121,285"/>
<area shape="rect" id="node3" href="communication_2gvt_8h.html#ac35f5f227c553fffd0911c995c865e17" title="Shut down the MPI&#45;based distributed GVT reduction submodule. " alt="" coords="343,81,484,108"/>
<area shape="rect" id="node13" href="gvt_2gvt_8h.html#a10977cb9180000f423f184cca0b6338d" title="gvt_fini" alt="" coords="816,5,883,32"/>
<area shape="rect" id="node14" href="gvt_2gvt_8h.html#a234e866bb1e37fa25dec9bb40134234d" title="get_last_gvt" alt="" coords="363,157,463,184"/>
<area shape="rect" id="node4" href="mpi_8h.html#a38b0bdfeab3308a62e50dc362ebd2a68" title="Finalize inter&#45;kernel communication. " alt="" coords="532,56,728,83"/>
<area shape="rect" id="node5" href="communication_8h.html#a6bd2f352e0326608e9a2bef2efbde184" title="Finalize the communication subsystem. " alt="" coords="776,56,923,83"/>
<area shape="rect" id="node6" href="core_8h.html#a8f346536ccfbe77b78ed577674beb6cf" title="simulation_shutdown" alt="" coords="971,99,1127,125"/>
<area shape="rect" id="node7" href="core_8c.html#a9b05d2af2e233e2616633eaa706682ee" title="exit_from_simulation\l_model" alt="" coords="1178,91,1333,133"/>
<area shape="rect" id="node11" href="main_8c.html#aa729cb27350c33119484501e13df4fec" title="main_simulation_loop" alt="" coords="1175,208,1336,235"/>
<area shape="rect" id="node8" href="core_8h.html#a7fb819521b1ab5fc7644ad216fe7b465" title="base_init" alt="" coords="1405,103,1484,129"/>
<area shape="rect" id="node9" href="init_8h.html#a417eb072179d09f441dbae3125049e46" title="SystemInit" alt="" coords="1553,131,1644,157"/>
<area shape="rect" id="node10" href="main_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="1692,169,1747,196"/>
<area shape="rect" id="node12" href="main_8c.html#af2ac8c142556588d87e6c069a4ca9894" title="end_computing" alt="" coords="1384,157,1505,184"/>
<area shape="rect" id="node15" href="queues_8h.html#a54eca9bfa893cac072d1b1d3010c2944" title="process_bottom_halves" alt="" coords="543,208,717,235"/>
<area shape="rect" id="node16" href="statistics_8c.html#ab7b584959699657a63a49384f07fd7a9" title="format_size" alt="" coords="581,107,679,133"/>
<area shape="rect" id="node17" href="statistics_8h.html#aeff52bbf045362270639b2baed20762b" title="statistics_stop" alt="" coords="792,107,907,133"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad243611fd168b265105bce70c193394d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void receive_remote_msgs </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Receive remote messages. </p>
<p>This function extracts from MPI events destined to locally-hosted LPs. Only messages to LP can be extracted here, because the probing is done towards the <a class="el" href="mpi_8c.html#a1fe3bf2e6acc84dcfee27e902f41c676">msg_comm</a> communicator.</p>
<p>A message which is extracted here is placed (out of order) in the bottom half of the destination LP, for later insertion (in order) in the input queue.</p>
<p>This function will try to extract as many messages as possible from the underlying MPI library. In particular, once this function is called, it will return only after that <em>no</em> <em>message</em> can be found in the MPI library, destined to this simulation kernel instance.</p>
<p>Currently, this function is called once per main loop iteration. Doing more calls might significantly imbalance the workload of some worker thread.</p>
<dl class="section note"><dt>Note</dt><dd>This function is thread-safe. </dd></dl>

<p>Definition at line <a class="el" href="mpi_8c_source.html#l00208">208</a> of file <a class="el" href="mpi_8c_source.html">mpi.c</a>.</p>

<p><div id="dynsection-14" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-14-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-14-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-14-content" class="dyncontent" style="display:none;">
<div class="center"><img src="mpi_8c_ad243611fd168b265105bce70c193394d_cgraph.png" border="0" usemap="#mpi_8c_ad243611fd168b265105bce70c193394d_cgraph" alt=""/></div>
<map name="mpi_8c_ad243611fd168b265105bce70c193394d_cgraph" id="mpi_8c_ad243611fd168b265105bce70c193394d_cgraph">
<area shape="rect" id="node2" href="atomic_8h.html#afd2c05472274bd1c73d5408a213cf429" title="spin_trylock" alt="" coords="243,5,340,32"/>
<area shape="rect" id="node4" href="communication_8c.html#ab957dc2cd186382c50ef8cfde9761909" title="Get a buffer to keep a message. " alt="" coords="217,56,365,83"/>
<area shape="rect" id="node5" href="communication_8c.html#aebec05b86f3467473116d555954b80f4" title="Perform some sanity checks on a message buffer. " alt="" coords="438,132,545,159"/>
<area shape="rect" id="node7" href="queues_8c.html#a9ff164dd6a938afa7e892f4028c2a033" title="insert_bottom_half" alt="" coords="220,157,363,184"/>
<area shape="rect" id="node8" href="atomic_8h.html#a4e8c9d1c6101995f1ecd2141d77e4824" title="spin_unlock" alt="" coords="243,208,339,235"/>
<area shape="rect" id="node3" href="x86_8c.html#af8f8b0714bc5f4f7238feae5ca425117" title="atomic_test_and_set" alt="" coords="413,5,569,32"/>
<area shape="rect" id="node6" href="communication_8c.html#ab442ee81854e910ac0b21e3caf21cc48" title="Tell the GID of the sender of a message, given its mark. " alt="" coords="617,132,719,159"/>
</map>
</div>
</p>

<p><div id="dynsection-15" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-15-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-15-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-15-content" class="dyncontent" style="display:none;">
<div class="center"><img src="mpi_8c_ad243611fd168b265105bce70c193394d_icgraph.png" border="0" usemap="#mpi_8c_ad243611fd168b265105bce70c193394d_icgraph" alt=""/></div>
<map name="mpi_8c_ad243611fd168b265105bce70c193394d_icgraph" id="mpi_8c_ad243611fd168b265105bce70c193394d_icgraph">
<area shape="rect" id="node2" href="gvt_2gvt_8h.html#a234e866bb1e37fa25dec9bb40134234d" title="get_last_gvt" alt="" coords="217,118,317,145"/>
<area shape="rect" id="node4" href="main_8c.html#aa729cb27350c33119484501e13df4fec" title="main_simulation_loop" alt="" coords="955,71,1116,98"/>
<area shape="rect" id="node3" href="main_8c.html#af2ac8c142556588d87e6c069a4ca9894" title="end_computing" alt="" coords="768,67,889,94"/>
<area shape="rect" id="node6" href="queues_8h.html#a54eca9bfa893cac072d1b1d3010c2944" title="process_bottom_halves" alt="" coords="365,118,540,145"/>
<area shape="rect" id="node7" href="statistics_8c.html#ab7b584959699657a63a49384f07fd7a9" title="format_size" alt="" coords="404,17,501,43"/>
<area shape="rect" id="node5" href="main_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="1429,42,1484,69"/>
<area shape="rect" id="node8" href="statistics_8h.html#aeff52bbf045362270639b2baed20762b" title="statistics_stop" alt="" coords="588,17,703,43"/>
<area shape="rect" id="node9" href="core_8h.html#a8f346536ccfbe77b78ed577674beb6cf" title="simulation_shutdown" alt="" coords="751,17,907,43"/>
<area shape="rect" id="node10" href="core_8c.html#a9b05d2af2e233e2616633eaa706682ee" title="exit_from_simulation\l_model" alt="" coords="958,5,1113,47"/>
<area shape="rect" id="node11" href="core_8h.html#a7fb819521b1ab5fc7644ad216fe7b465" title="base_init" alt="" coords="1164,14,1243,41"/>
<area shape="rect" id="node12" href="init_8h.html#a417eb072179d09f441dbae3125049e46" title="SystemInit" alt="" coords="1291,15,1381,42"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ace2c9a712d7d5f8e73dda54c9de3e358"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void reduce_stat_vector </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structstat__t.html">stat_t</a> *&#160;</td>
          <td class="paramname"><em>in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structstat__t.html">stat_t</a> *&#160;</td>
          <td class="paramname"><em>inout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MPI_Datatype *&#160;</td>
          <td class="paramname"><em>dptr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reduce operation for statistics. </p>
<p>This function implements a custom MPI Operation used to reduce globally local statistics upon simulation shutdown. This function is bound to <a class="el" href="mpi_8c.html#aed467d46a8af2392f12767bc8f1f2462">reduce_stats_op</a> in <a class="el" href="mpi_8c.html#a013115e2b9fb4af92de3a6b212fc8065" title="Initialize MPI Datatype and Operation for statistics reduction. ">stats_reduction_init()</a>. </p>

<p>Definition at line <a class="el" href="mpi_8c_source.html#l00348">348</a> of file <a class="el" href="mpi_8c_source.html">mpi.c</a>.</p>

<p><div id="dynsection-16" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-16-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-16-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-16-content" class="dyncontent" style="display:none;">
<div class="center"><img src="mpi_8c_ace2c9a712d7d5f8e73dda54c9de3e358_icgraph.png" border="0" usemap="#mpi_8c_ace2c9a712d7d5f8e73dda54c9de3e358_icgraph" alt=""/></div>
<map name="mpi_8c_ace2c9a712d7d5f8e73dda54c9de3e358_icgraph" id="mpi_8c_ace2c9a712d7d5f8e73dda54c9de3e358_icgraph">
<area shape="rect" id="node2" href="mpi_8c.html#a013115e2b9fb4af92de3a6b212fc8065" title="Initialize MPI Datatype and Operation for statistics reduction. " alt="" coords="199,5,345,32"/>
<area shape="rect" id="node3" href="mpi_8h.html#aae0b9d97e0c3d31df6e27e2455e66a13" title="Initialize inter&#45;kernel communication. " alt="" coords="393,5,564,32"/>
<area shape="rect" id="node4" href="communication_8h.html#a9d1c122bc3538d94d6fd8328cd6c6a2d" title="Initialize the communication subsystem. " alt="" coords="612,5,759,32"/>
<area shape="rect" id="node5" href="init_8h.html#a417eb072179d09f441dbae3125049e46" title="SystemInit" alt="" coords="807,5,897,32"/>
<area shape="rect" id="node6" href="main_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="945,5,1000,32"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a41390aa810e506d633d2cf01bc5973bb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void send_remote_msg </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="core_8h.html#abb831098e1334cd59d2c5e374416680e">msg_t</a> *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a message to a remote LP. </p>
<p>This function takes in charge an event to be delivered to a remote LP. The sending operation is non-blocking: to this end, the message is registered into the outgoing queue of the destination kernel, in order to allow MPI to keep track of the sending operation.</p>
<p>Also, the message being sent is registered at the sender thread, to keep track of the white/red message information which is necessary to correctly reduce the GVT value.</p>
<dl class="section note"><dt>Note</dt><dd>This function is thread-safe.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>A pointer to the <a class="el" href="core_8h.html#abb831098e1334cd59d2c5e374416680e">msg_t</a> keeping the message to be sent remotely </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mpi_8c_source.html#l00169">169</a> of file <a class="el" href="mpi_8c_source.html">mpi.c</a>.</p>

<p><div id="dynsection-17" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-17-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-17-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-17-content" class="dyncontent" style="display:none;">
<div class="center"><img src="mpi_8c_a41390aa810e506d633d2cf01bc5973bb_cgraph.png" border="0" usemap="#mpi_8c_a41390aa810e506d633d2cf01bc5973bb_cgraph" alt=""/></div>
<map name="mpi_8c_a41390aa810e506d633d2cf01bc5973bb_cgraph" id="mpi_8c_a41390aa810e506d633d2cf01bc5973bb_cgraph">
<area shape="rect" id="node2" href="wnd_8c.html#a76d33aed8e7dfe9ab6d8ce4f9b1f4fd8" title="Allocate a buffer for an outgoing message node. " alt="" coords="196,5,367,32"/>
<area shape="rect" id="node3" href="core_8c.html#a6793e4c70d69277f24ff0e494ed8ed10" title="find_kernel_by_gid" alt="" coords="415,56,553,83"/>
<area shape="rect" id="node4" href="communication_2gvt_8c.html#a76f513e8aeeeb0abebc46f19ceb72293" title="Register an outgoing message, if necessary. " alt="" coords="197,107,366,133"/>
<area shape="rect" id="node6" href="wnd_8c.html#a16850c4710b9b54fc67b88547b3b87ee" title="Store an outgoing message. " alt="" coords="205,157,358,184"/>
<area shape="rect" id="node5" href="atomic_8h.html#ae2153aa1dc0d0362246d6e14f60b5550" title="atomic_inc" alt="" coords="439,107,529,133"/>
<area shape="rect" id="node7" href="atomic_8h.html#a7a6b9868956dd8e51e5de80e16c76fc4" title="spin_lock" alt="" coords="444,157,524,184"/>
<area shape="rect" id="node8" href="atomic_8h.html#a4e8c9d1c6101995f1ecd2141d77e4824" title="spin_unlock" alt="" coords="436,208,532,235"/>
</map>
</div>
</p>

<p><div id="dynsection-18" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-18-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-18-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-18-content" class="dyncontent" style="display:none;">
<div class="center"><img src="mpi_8c_a41390aa810e506d633d2cf01bc5973bb_icgraph.png" border="0" usemap="#mpi_8c_a41390aa810e506d633d2cf01bc5973bb_icgraph" alt=""/></div>
<map name="mpi_8c_a41390aa810e506d633d2cf01bc5973bb_icgraph" id="mpi_8c_a41390aa810e506d633d2cf01bc5973bb_icgraph">
<area shape="rect" id="node2" href="communication_8h.html#ab5250867c0edfc326732c059b0c0c3b5" title="Send a message. " alt="" coords="196,143,251,170"/>
<area shape="rect" id="node3" href="communication_8h.html#aa8047651e174f4d26bef644233b5c8f8" title="Send all antimessages for a certain LP. " alt="" coords="299,118,449,145"/>
<area shape="rect" id="node17" href="communication_8h.html#ad154a0e0c0815b786ead70143505abd6" title="Send all pending outgoing messages. " alt="" coords="497,169,656,195"/>
<area shape="rect" id="node4" href="state_8h.html#a1fd6b7926db41257e07600226d87fffa" title="rollback" alt="" coords="541,118,612,145"/>
<area shape="rect" id="node5" href="scheduler_8h.html#ac48128e72b303ea22d8ec641a9516b15" title="schedule" alt="" coords="704,143,783,170"/>
<area shape="rect" id="node6" href="gvt_2gvt_8h.html#a234e866bb1e37fa25dec9bb40134234d" title="get_last_gvt" alt="" coords="831,118,931,145"/>
<area shape="rect" id="node8" href="main_8c.html#aa729cb27350c33119484501e13df4fec" title="main_simulation_loop" alt="" coords="1568,71,1729,98"/>
<area shape="rect" id="node7" href="main_8c.html#af2ac8c142556588d87e6c069a4ca9894" title="end_computing" alt="" coords="1381,67,1503,94"/>
<area shape="rect" id="node10" href="queues_8h.html#a54eca9bfa893cac072d1b1d3010c2944" title="process_bottom_halves" alt="" coords="979,118,1153,145"/>
<area shape="rect" id="node11" href="statistics_8c.html#ab7b584959699657a63a49384f07fd7a9" title="format_size" alt="" coords="1017,17,1115,43"/>
<area shape="rect" id="node9" href="main_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="2043,42,2097,69"/>
<area shape="rect" id="node12" href="statistics_8h.html#aeff52bbf045362270639b2baed20762b" title="statistics_stop" alt="" coords="1201,17,1316,43"/>
<area shape="rect" id="node13" href="core_8h.html#a8f346536ccfbe77b78ed577674beb6cf" title="simulation_shutdown" alt="" coords="1364,17,1520,43"/>
<area shape="rect" id="node14" href="core_8c.html#a9b05d2af2e233e2616633eaa706682ee" title="exit_from_simulation\l_model" alt="" coords="1571,5,1726,47"/>
<area shape="rect" id="node15" href="core_8h.html#a7fb819521b1ab5fc7644ad216fe7b465" title="base_init" alt="" coords="1777,14,1856,41"/>
<area shape="rect" id="node16" href="init_8h.html#a417eb072179d09f441dbae3125049e46" title="SystemInit" alt="" coords="1904,15,1995,42"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a013115e2b9fb4af92de3a6b212fc8065"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void stats_reduction_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initialize MPI Datatype and Operation for statistics reduction. </p>
<p>To reduce statistics, we rely on a custom MPI Operation. This operation requires a pre-built MPI Datatype to properly handle the structures which we use to represent the local information.</p>
<p>This function is called when initializing inter-kernel communication, and its purpose is exactly that of setting up a custom MPI datatype in <a class="el" href="mpi_8c.html#ae7111c0c6a661d8177c9a669942ebc9c">stats_mpi_t</a>.</p>
<p>Additionally, this function defines the custom operation implemented in <a class="el" href="mpi_8c.html#ace2c9a712d7d5f8e73dda54c9de3e358" title="Reduce operation for statistics. ">reduce_stat_vector()</a> which is bound to the MPI Operation <a class="el" href="mpi_8c.html#aed467d46a8af2392f12767bc8f1f2462">reduce_stats_op</a>. </p>

<p>Definition at line <a class="el" href="mpi_8c_source.html#l00381">381</a> of file <a class="el" href="mpi_8c_source.html">mpi.c</a>.</p>

<p><div id="dynsection-19" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-19-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-19-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-19-content" class="dyncontent" style="display:none;">
<div class="center"><img src="mpi_8c_a013115e2b9fb4af92de3a6b212fc8065_cgraph.png" border="0" usemap="#mpi_8c_a013115e2b9fb4af92de3a6b212fc8065_cgraph" alt=""/></div>
<map name="mpi_8c_a013115e2b9fb4af92de3a6b212fc8065_cgraph" id="mpi_8c_a013115e2b9fb4af92de3a6b212fc8065_cgraph">
<area shape="rect" id="node2" href="mpi_8c.html#ace2c9a712d7d5f8e73dda54c9de3e358" title="Reduce operation for statistics. " alt="" coords="200,5,345,32"/>
</map>
</div>
</p>

<p><div id="dynsection-20" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-20-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-20-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-20-content" class="dyncontent" style="display:none;">
<div class="center"><img src="mpi_8c_a013115e2b9fb4af92de3a6b212fc8065_icgraph.png" border="0" usemap="#mpi_8c_a013115e2b9fb4af92de3a6b212fc8065_icgraph" alt=""/></div>
<map name="mpi_8c_a013115e2b9fb4af92de3a6b212fc8065_icgraph" id="mpi_8c_a013115e2b9fb4af92de3a6b212fc8065_icgraph">
<area shape="rect" id="node2" href="mpi_8h.html#aae0b9d97e0c3d31df6e27e2455e66a13" title="Initialize inter&#45;kernel communication. " alt="" coords="200,5,371,32"/>
<area shape="rect" id="node3" href="communication_8h.html#a9d1c122bc3538d94d6fd8328cd6c6a2d" title="Initialize the communication subsystem. " alt="" coords="419,5,565,32"/>
<area shape="rect" id="node4" href="init_8h.html#a417eb072179d09f441dbae3125049e46" title="SystemInit" alt="" coords="613,5,704,32"/>
<area shape="rect" id="node5" href="main_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="752,5,807,32"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a4d5b6bd7866b813152f5ead12012dc46"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void syncronize_all </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Syncronize all the kernels. </p>
<p>This function can be used as syncronization barrier between all the threads of all the kernels.</p>
<p>The function will return only after all the threads on all the kernels have already entered this function.</p>
<p>We create a new communicator here, to be sure that we synchronize exactly in this function and not somewhere else.</p>
<dl class="section warning"><dt>Warning</dt><dd>This function is extremely resource intensive, wastes a lot of cpu cycles, and drops performance significantly. Avoid using it as much as possible! </dd></dl>

<p>Definition at line <a class="el" href="mpi_8c_source.html#l00492">492</a> of file <a class="el" href="mpi_8c_source.html">mpi.c</a>.</p>

<p><div id="dynsection-21" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-21-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-21-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-21-content" class="dyncontent" style="display:none;">
<div class="center"><img src="mpi_8c_a4d5b6bd7866b813152f5ead12012dc46_cgraph.png" border="0" usemap="#mpi_8c_a4d5b6bd7866b813152f5ead12012dc46_cgraph" alt=""/></div>
<map name="mpi_8c_a4d5b6bd7866b813152f5ead12012dc46_cgraph" id="mpi_8c_a4d5b6bd7866b813152f5ead12012dc46_cgraph">
<area shape="rect" id="node2" href="thread_8c.html#a9f5993fbefc809165c4b74bb8da463d0" title="thread_barrier" alt="" coords="164,31,277,57"/>
<area shape="rect" id="node3" href="atomic_8h.html#a52336e036d2da5656c6db69b121458ba" title="atomic_dec" alt="" coords="355,5,451,32"/>
<area shape="rect" id="node4" href="atomic_8h.html#ab61334506e238ad3190ce02fc53af0fb" title="atomic_inc_and_test" alt="" coords="325,56,480,83"/>
</map>
</div>
</p>

<p><div id="dynsection-22" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-22-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-22-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-22-content" class="dyncontent" style="display:none;">
<div class="center"><img src="mpi_8c_a4d5b6bd7866b813152f5ead12012dc46_icgraph.png" border="0" usemap="#mpi_8c_a4d5b6bd7866b813152f5ead12012dc46_icgraph" alt=""/></div>
<map name="mpi_8c_a4d5b6bd7866b813152f5ead12012dc46_icgraph" id="mpi_8c_a4d5b6bd7866b813152f5ead12012dc46_icgraph">
<area shape="rect" id="node2" href="main_8c.html#aa729cb27350c33119484501e13df4fec" title="main_simulation_loop" alt="" coords="164,5,325,32"/>
<area shape="rect" id="node3" href="main_8c.html#af2ac8c142556588d87e6c069a4ca9894" title="end_computing" alt="" coords="373,5,495,32"/>
<area shape="rect" id="node4" href="main_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="407,56,461,83"/>
</map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="a46fe48a4497654d137246733217dad47"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structspinlock__t.html">spinlock_t</a> mpi_lock</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This global lock is used by the lock/unlock_mpi macro to control access to MPI interface. If proper MPI threading support is available from the runtime, then it is not used. </p>

<p>Definition at line <a class="el" href="mpi_8c_source.html#l00055">55</a> of file <a class="el" href="mpi_8c_source.html">mpi.c</a>.</p>

</div>
</div>
<a class="anchor" id="a1fe3bf2e6acc84dcfee27e902f41c676"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">MPI_Comm msg_comm</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>MPI Communicator for event/control messages. </p>
<p>To enable zero-copy message passing, we must know what LP is the destination of an event, <em>before</em> extracting that event from the MPI layer. This is necessary to determine from what slab/buddy the memory to keep the event must be taken. Yet, this is impossible because the MPI layer does not allow to do so.</p>
<p>To actually be able to do that, the trick is to create a separate MPI Communicator which is used <em>only</em> to exchance events across LPs (control messages also fall in this category). Then, since we can extract events from this communicator, we can match against both MPI_ANY_SOURCE (to receive events from any simulation kernel instance) and MPI_ANY_TAG (to match independently of the tag).</p>
<p>We therefore use the tag to identify the GID of the LP.</p>
<p>We can retrieve the information about the message sender and the size of the message which will be extracted by inspecting the MPI_Status variable after an MPI_Iprobe is completed. </p>

<p>Definition at line <a class="el" href="mpi_8c_source.html#l00100">100</a> of file <a class="el" href="mpi_8c_source.html">mpi.c</a>.</p>

</div>
</div>
<a class="anchor" id="a413a65c2f20603153b4dd8c7b414db54"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int terminated = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This counter tells how many simulation kernel instances have already reached the termination condition. This is updated via <a class="el" href="mpi_8c.html#a19d485235dd4145edaa8eabe632a77f6" title="Check if other kernels have reached the termination condition. ">collect_termination()</a>. </p>

<p>Definition at line <a class="el" href="mpi_8c_source.html#l00064">64</a> of file <a class="el" href="mpi_8c_source.html">mpi.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_6d2104db64b91953bbd7b8fedbb8a094.html">communication</a></li><li class="navelem"><a class="el" href="mpi_8c.html">mpi.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
